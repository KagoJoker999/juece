<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å®¢æœå”®åæ™ºèƒ½å·¥ä½œå° (é™æ€)</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path fill='%23ff3131' d='M 26.40625 10.515625 L 26.40625 10.367188 C 26.40625 4.652344 21.753906 0 16.035156 0 L 13.964844 0 C 8.246094 0 3.59375 4.652344 3.59375 10.367188 L 3.59375 10.515625 C 1.8125 10.980469 0.484375 12.589844 0.484375 14.515625 L 0.484375 16.589844 C 0.484375 18.878906 2.34375 20.738281 4.632812 20.738281 L 6.703125 20.738281 C 7.277344 20.738281 7.742188 20.273438 7.742188 19.699219 L 7.742188 11.40625 C 7.742188 10.832031 7.277344 10.367188 6.703125 10.367188 L 5.667969 10.367188 C 5.667969 5.796875 9.390625 2.074219 13.964844 2.074219 L 16.035156 2.074219 C 20.609375 2.074219 24.332031 5.796875 24.332031 10.367188 L 23.296875 10.367188 C 22.722656 10.367188 22.257812 10.832031 22.257812 11.40625 L 22.257812 19.699219 C 22.257812 20.273438 22.722656 20.738281 23.296875 20.738281 L 24.28125 20.738281 C 23.972656 23.980469 22.222656 24.6875 21.015625 24.839844 C 20.574219 23.660156 19.445312 22.8125 18.109375 22.8125 C 16.394531 22.8125 15 24.207031 15 25.921875 C 15 27.636719 16.394531 29.03125 18.109375 29.03125 C 19.476562 29.03125 20.628906 28.140625 21.046875 26.910156 C 24.261719 26.585938 26.125 24.382812 26.375 20.597656 C 28.175781 20.144531 29.515625 18.527344 29.515625 16.589844 L 29.515625 14.515625 C 29.515625 12.589844 28.1875 10.980469 26.40625 10.515625 Z M 5.667969 18.664062 L 4.632812 18.664062 C 3.488281 18.664062 2.558594 17.734375 2.558594 16.589844 L 2.558594 14.515625 C 2.558594 13.371094 3.488281 12.441406 4.632812 12.441406 L 5.667969 12.441406 Z M 18.109375 26.957031 C 17.539062 26.957031 17.074219 26.492188 17.074219 25.921875 C 17.074219 25.351562 17.539062 24.886719 18.109375 24.886719 C 18.683594 24.886719 19.148438 25.351562 19.148438 25.921875 C 19.148438 26.492188 18.683594 26.957031 18.109375 26.957031 Z M 27.441406 16.589844 C 27.441406 17.734375 26.511719 18.664062 25.367188 18.664062 L 24.332031 18.664062 L 24.332031 12.441406 L 25.367188 12.441406 C 26.511719 12.441406 27.441406 13.371094 27.441406 14.515625 Z'/></svg>"
    type="image/svg+xml">
  <!-- å¼•å…¥ Tailwind CSS CDN ä»¥æä¾›æ ·å¼æ”¯æŒ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ä½¿ç”¨ Inter å­—ä½“ä»¥è·å¾—ç°ä»£æ„Ÿ */
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
    }
  </style>
  <!-- å¼•å…¥ React å’Œ ReactDOM CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- å¼•å…¥ Babel CDNï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­ç¼–è¯‘ JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- å¼•å…¥ Lucide Icons for React (è¿™æ˜¯ç®€åŒ–å¤„ç†ï¼Œå‡è®¾ç¯å¢ƒèƒ½è¯†åˆ«) -->
  <!-- ç”±äºæ— æ³•ç›´æ¥å¼•å…¥lucide-reactçš„å®Œæ•´CDNï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç®€åŒ–çš„Iconç»„ä»¶æ¥åŒ…è£¹SVGï¼Œä»¥ç¡®ä¿é¡µé¢ç»“æ„ä¸æŠ¥é”™ -->
</head>

<body class="bg-slate-100">
  <div id="root">
    <!-- React åº”ç”¨å°†æ¸²æŸ“åœ¨è¿™é‡Œ -->
  </div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const root = ReactDOM.createRoot(document.getElementById('root'));

    // --- ç®€åŒ– Lucide Icons å®šä¹‰ ---
    // å®é™…çš„lucide-reactç»„ä»¶æ— æ³•é€šè¿‡ç®€å•CDNå¼•å…¥ã€‚è¿™é‡Œä»…ä¸ºé¿å…JSXç¼–è¯‘é”™è¯¯ï¼Œæˆ‘ä»¬ä½¿ç”¨å ä½ç¬¦æˆ–ç®€å•çš„SVGç»“æ„ã€‚
    // ä¸ºäº†ç¡®ä¿åŠŸèƒ½å®Œæ•´ï¼Œæˆ‘å°†ç›´æ¥ä½¿ç”¨inline SVG/Emojiä½œä¸ºå›¾æ ‡çš„è§†è§‰æ›¿ä»£å“ï¼Œä»¥ä¿éšœä»£ç çš„é™æ€å¯è¿è¡Œæ€§ã€‚
    const Icon = ({ name, size = 18, className = "" }) => {
      const iconMap = {
        Clipboard: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg>,
        CheckSquare: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>,
        ExternalLink: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: è­¦å‘Šä¸‰è§’å½¢ (5.svg)
        AlertTriangle: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 29.164062 23.773438 L 17.09375 2.847656 C 16.675781 2.125 15.894531 1.636719 15 1.636719 C 14.105469 1.636719 13.324219 2.125 12.90625 2.847656 L 0.835938 23.773438 C 0.628906 24.125 0.511719 24.539062 0.511719 24.976562 C 0.511719 26.308594 1.59375 27.390625 2.925781 27.390625 L 27.074219 27.390625 C 28.40625 27.390625 29.488281 26.308594 29.488281 24.976562 C 29.488281 24.539062 29.371094 24.125 29.164062 23.773438 Z M 2.925781 24.980469 L 14.996094 4.050781 L 15 4.050781 L 15 4.054688 L 27.074219 24.976562 Z M 15 19.34375 C 14.113281 19.34375 13.390625 20.0625 13.390625 20.953125 C 13.390625 21.84375 14.109375 22.5625 15 22.5625 C 15.890625 22.5625 16.609375 21.839844 16.609375 20.953125 C 16.609375 20.0625 15.890625 19.34375 15 19.34375 Z M 13.390625 12.097656 C 13.390625 12.191406 13.398438 12.28125 13.414062 12.371094 L 14.207031 17.0625 C 14.269531 17.445312 14.601562 17.734375 15 17.734375 C 15.398438 17.734375 15.730469 17.445312 15.792969 17.0625 L 16.585938 12.371094 C 16.601562 12.28125 16.609375 12.191406 16.609375 12.097656 C 16.609375 11.210938 15.890625 10.488281 15 10.488281 C 14.113281 10.488281 13.390625 11.210938 13.390625 12.097656 Z" /></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: æœç´¢ (1.svg)
        Search: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 28.5 23.101562 L 23.808594 18.410156 C 22.675781 17.28125 20.957031 17.109375 19.632812 17.867188 L 18.128906 16.363281 C 19.570312 14.628906 20.445312 12.40625 20.445312 9.980469 C 20.445312 4.476562 15.964844 0 10.464844 0 C 4.960938 0 0.484375 4.476562 0.484375 9.980469 C 0.484375 15.480469 4.960938 19.960938 10.464844 19.960938 C 12.890625 19.960938 15.113281 19.085938 16.84375 17.644531 L 18.347656 19.148438 C 17.589844 20.472656 17.761719 22.191406 18.894531 23.324219 L 23.585938 28.015625 C 24.242188 28.671875 25.113281 29.03125 26.042969 29.03125 C 27.957031 29.03125 29.515625 27.472656 29.515625 25.558594 C 29.515625 24.632812 29.15625 23.757812 28.5 23.101562 Z M 2.296875 9.980469 C 2.296875 5.476562 5.960938 1.816406 10.464844 1.816406 C 14.964844 1.816406 18.628906 5.476562 18.628906 9.980469 C 18.628906 14.484375 14.964844 18.144531 10.464844 18.144531 C 5.960938 18.144531 2.296875 14.484375 2.296875 9.980469 Z M 26.042969 27.21875 C 25.605469 27.21875 25.179688 27.039062 24.871094 26.730469 L 20.175781 22.039062 C 19.53125 21.394531 19.53125 20.339844 20.175781 19.695312 C 20.5 19.371094 20.925781 19.210938 21.351562 19.210938 C 21.777344 19.210938 22.199219 19.371094 22.523438 19.695312 L 27.214844 24.386719 C 27.523438 24.695312 27.703125 25.121094 27.703125 25.558594 C 27.703125 26.472656 26.957031 27.21875 26.042969 27.21875 Z M 26.042969 27.21875" /><path d="M 4.113281 9.980469 L 5.925781 9.980469 C 5.925781 7.480469 7.960938 5.445312 10. 464844 5.445312 L 10.464844 3.628906 C 6.960938 3.628906 4.113281 6.480469 4.113281 9.980469 Z" /></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: æ—¶é’Ÿ (4.svg)
        Clock: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 15 0 C 6.996094 0 0.484375 6.511719 0.484375 14.515625 C 0.484375 22.519531 6.996094 29.03125 15 29.03125 C 23.003906 29.03125 29.515625 22.519531 29.515625 14.515625 C 29.515625 6.511719 23.003906 0 15 0 Z M 15 27.21875 C 7.996094 27.21875 2.296875 21.519531 2.296875 14.515625 C 2.296875 7.511719 7.996094 1.816406 15 1.816406 C 22.003906 1.816406 27.703125 7.511719 27.703125 14.515625 C 27.703125 21.519531 22.003906 27.21875 15 27.21875 Z M 20.957031 18.953125 C 20.78125 19.191406 20.507812 19.316406 20.230469 19.316406 C 20.042969 19.316406 19.851562 19.257812 19.6875 19.136719 L 14.457031 15.242188 C 14.226562 15.074219 14.09375 14.804688 14.09375 14.515625 L 14.09375 6.214844 C 14.09375 5.714844 14.5 5.308594 15 5.308594 C 15.5 5.308594 15.90625 5.714844 15.90625 6.214844 L 15.90625 14.058594 L 20.773438 17.683594 C 21.175781 17.980469 21.257812 18.550781 20.957031 18.953125 Z" /></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: æ‰«æå™¨ (2.svg)
        Package: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 1.765625 2.292969 C 1.765625 1.734375 2.21875 1.28125 2.78125 1.28125 L 10.070312 1.28125 C 10.628906 1.28125 11.085938 1.734375 11.085938 2.292969 C 11.085938 2.851562 10.628906 3.304688 10.070312 3.304688 L 3.792969 3.304688 L 3.792969 9.585938 C 3.792969 10.144531 3.339844 10.597656 2.78125 10.597656 C 2.21875 10.597656 1.765625 10.144531 1.765625 9.585938 Z M 18.78125 2.292969 C 18.78125 1.734375 19.234375 1.28125 19.792969 1.28125 L 27.085938 1.28125 C 27.644531 1.28125 28.097656 1.734375 28.097656 2.292969 L 28.097656 9.585938 C 28.097656 10.144531 27.644531 10.597656 27.085938 10.597656 C 26.527344 10.597656 26.074219 10.144531 26.074219 9.585938 L 26.074219 3.304688 L 19.792969 3.304688 C 19.234375 3.304688 18.78125 2.851562 18.78125 2.292969 Z M 2.78125 18.292969 C 3.339844 18.292969 3.792969 18.75 3.792969 19.308594 L 3.792969 25.585938 L 10.070312 25.585938 C 10.628906 25.585938 11.085938 26.039062 11.085938 26.597656 C 11.085938 27.160156 10.628906 27.613281 10.070312 27.613281 L 2.78125 27.613281 C 2.21875 27.613281 1.765625 27.160156 1.765625 26.597656 L 1.765625 19.308594 C 1.765625 18.75 2.21875 18.292969 2.78125 18.292969 Z M 27.085938 18.292969 C 27.644531 18.292969 28.097656 18.75 28.097656 19.308594 L 28.097656 21.199219 C 28.097656 21.757812 27.644531 22.210938 27.085938 22.210938 C 26.527344 22.210938 26.074219 21.757812 26.074219 21.199219 L 26.074219 19.308594 C 26.074219 18.75 26.527344 18.292969 27.085938 18.292969 Z M 27.085938 24.234375 C 27.644531 24.234375 28.097656 24.691406 28.097656 25.25 L 28.097656 26.597656 C 28.097656 27.160156 27.644531 27.613281 27.085938 27.613281 L 19.792969 27.613281 C 19.234375 27.613281 18.78125 27.160156 18.78125 26.597656 C 18.78125 26.039062 19.234375 25.585938 19.792969 25.585938 L 26.074219 25.585938 L 26.074219 25.25 C 26.074219 24.691406 26.527344 24.234375 27.085938 24.234375 Z" /><path d="M 0.417969 14.445312 C 0.417969 13.886719 0.871094 13.433594 1.429688 13.433594 L 28.4375 13.433594 C 28.996094 13.433594 29.449219 13.886719 29.449219 14.445312 C 29.449219 15.003906 28.996094 15.460938 28.4375 15.460938 L 1.429688 15.460938 C 0.871094 15.460938 0.417969 15.003906 0.417969 14.445312 Z" /></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: äº¤æ¢ç®­å¤´ (3.svg)
        RefreshCw: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 29.132812 9.597656 L 22.144531 3.210938 C 21.878906 2.96875 21.496094 2.90625 21.164062 3.050781 C 20.839844 3.195312 20.636719 3.503906 20.636719 3.863281 L 20.636719 6.839844 L 12.328125 6.839844 C 11.835938 6.839844 11.4375 7.242188 11.4375 7.730469 L 11.4375 12.773438 C 11.4375 13.265625 11.835938 13.664062 12.328125 13.664062 L 20.636719 13.664062 L 20.636719 16.546875 C 20.628906 16.636719 20.636719 16.730469 20.65625 16.824219 C 20.734375 17.207031 21.050781 17.484375 21.453125 17.519531 C 21.472656 17.519531 21.492188 17.523438 21.515625 17.523438 C 21.527344 17.523438 21.535156 17.523438 21.546875 17.523438 C 21.65625 17.523438 21.765625 17.503906 21.871094 17.460938 C 21.992188 17.414062 22.101562 17.339844 22.1875 17.246094 L 29.128906 10.902344 C 29.3125 10.742188 29.417969 10.503906 29.417969 10.25 C 29.417969 9.996094 29.3125 9.761719 29.132812 9.597656 Z M 21.535156 11.875 L 13.226562 11.875 L 13.226562 8.621094 L 21.535156 8.621094 C 22.027344 8.621094 22.425781 8.222656 22.425781 7.730469 L 22.425781 5.886719 L 27.203125 10.25 L 22.425781 14.613281 L 22.425781 12.769531 C 22.425781 12.277344 22.027344 11.875 21.535156 11.875 Z" /><path d="M 17.960938 15.445312 L 9.652344 15.445312 L 9.652344 12.464844 C 9.652344 12.113281 9.457031 11.804688 9.140625 11.660156 C 8.8125 11.511719 8.429688 11.570312 8.15625 11.808594 C 7.742188 12.171875 7.324219 12.535156 6.90625 12.902344 C 6.5 13.257812 6.09375 13.613281 5.691406 13.96875 L 4.4375 15.066406 C 3.546875 15.851562 2.65625 16.632812 1.765625 17.414062 L 0.875 18.195312 C 0.6875 18.355469 0.582031 18.59375 0.582031 18.851562 C 0.582031 19.109375 0.6875 19.351562 0.871094 19.511719 C 1.285156 19.871094 1.695312 20.230469 2.105469 20.59375 C 2.519531 20.953125 2.929688 21.3125 3.339844 21.675781 L 4.617188 22.796875 C 5.5 23.570312 6.382812 24.34375 7.265625 25.117188 L 8.117188 25.863281 C 8.230469 25.976562 8.371094 26.058594 8.527344 26.097656 C 8.605469 26.121094 8.6875 26.128906 8.765625 26.128906 C 8.894531 26.128906 9.019531 26.101562 9.136719 26.046875 C 9.457031 25.90625 9.652344 25.601562 9.652344 25.246094 L 9.652344 22.269531 L 17.960938 22.269531 C 18.453125 22.269531 18.855469 21.867188 18.855469 21.375 L 18.855469 16.335938 C 18.855469 15.84375 18.453125 15.445312 17.960938 15.445312 Z M 8.757812 17.226562 L 17.066406 17.226562 L 17.066406 20.480469 L 8.757812 20.480469 C 8.265625 20.480469 7.863281 20.878906 7.863281 21.371094 L 7.863281 23.273438 L 5.632812 21.316406 C 4.746094 20.535156 3.855469 19.753906 2.96875 18.976562 L 2.828125 18.851562 L 5.796875 16.25 C 6.484375 15.644531 7.175781 15.039062 7.863281 14.433594 L 7.863281 16.332031 C 7.863281 16.824219 8.265625 17.226562 8.757812 17.226562 Z" /></svg>,
        MessageSquare: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: è®¡ç®—å™¨ (7.svg)
        Calculator: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 22.683594 0 L 7.324219 0 C 5.925781 0 4.785156 1.140625 4.785156 2.539062 L 4.785156 26.492188 C 4.785156 27.890625 5.925781 29.03125 7.324219 29.03125 L 22.683594 29.03125 C 24.085938 29.03125 25.222656 27.890625 25.222656 26.492188 L 25.222656 2.539062 C 25.222656 1.140625 24.085938 0 22.683594 0 Z M 11.734375 23.140625 C 11.734375 23.738281 11.246094 24.226562 10.644531 24.226562 L 9.347656 24.226562 C 8.746094 24.226562 8.257812 23.738281 8.257812 23.140625 L 8.257812 22.355469 C 8.257812 21.753906 8.746094 21.265625 9.347656 21.265625 L 10.644531 21.265625 C 11.246094 21.265625 11.734375 21.753906 11.734375 22.355469 Z M 11.734375 18.785156 C 11.734375 19.386719 11.246094 19.875 10.644531 19.875 L 9.347656 19.875 C 8.746094 19.875 8.257812 19.386719 8.257812 18.785156 L 8.257812 18 C 8.257812 17.398438 8.746094 16.910156 9.347656 16.910156 L 10.644531 16.910156 C 11.246094 16.910156 11.734375 17.398438 11.734375 18 Z M 11.734375 14.429688 C 11.734375 15.03125 11.246094 15.519531 10.644531 15.519531 L 9.347656 15.519531 C 8.746094 15.519531 8.257812 15.03125 8.257812 14.429688 L 8.257812 13.644531 C 8.257812 13.042969 8.746094 12.554688 9.347656 12.554688 L 10.644531 12.554688 C 11.246094 12.554688 11.734375 13.042969 11.734375 13.644531 Z M 16.8125 23.140625 C 16.8125 23.738281 16.324219 24.226562 15.726562 24.226562 L 14.429688 24.226562 C 13.828125 24.226562 13.339844 23.738281 13.339844 23.140625 L 13.339844 22.355469 C 13.339844 21.753906 13.828125 21.265625 14.429688 21.265625 L 15.726562 21.265625 C 16.324219 21.265625 16.8125 21.753906 16.8125 22.355469 Z M 16.8125 18.785156 C 16.8125 19.386719 16.324219 19.875 15.726562 19.875 L 14.429688 19.875 C 13.828125 19.875 13.339844 19.386719 13.339844 18.785156 L 13.339844 18 C 13.339844 17.398438 13.828125 16.910156 14.429688 16.910156 L 15.726562 16.910156 C 16.324219 16.910156 16.8125 17.398438 16.8125 18 Z M 16.8125 14.429688 C 16.8125 15.03125 16.324219 15.519531 15.726562 15.519531 L 14.429688 15.519531 C 13.828125 15.519531 13.339844 15.03125 13.339844 14.429688 L 13.339844 13.644531 C 13.339844 13.042969 13.828125 12.554688 14.429688 12.554688 L 15.726562 12.554688 C 16.324219 12.554688 16.8125 13.042969 16.8125 13.644531 Z M 21.894531 23.140625 C 21.894531 23.738281 21.40625 24.226562 20.804688 24.226562 L 19.507812 24.226562 C 18.90625 24.226562 18.417969 23.738281 18.417969 23.140625 L 18.417969 18 C 18.417969 17.398438 18.90625 16.910156 19.507812 16.910156 L 20.804688 16.910156 C 21.40625 16.910156 21.894531 17.398438 21.894531 18 Z M 21.894531 14.429688 C 21.894531 15.03125 21.40625 15.519531 20.804688 15.519531 L 19.507812 15.519531 C 18.90625 15.519531 18.417969 15.03125 18.417969 14.429688 L 18.417969 13.644531 C 18.417969 13.042969 18.90625 12.554688 19.507812 12.554688 L 20.804688 12.554688 C 21.40625 12.554688 21.894531 13.042969 21.894531 13.644531 Z M 22.816406 6.789062 C 22.816406 8.1875 21.675781 9.328125 20.277344 9.328125 L 9.878906 9.328125 C 8.476562 9.328125 7.335938 8.1875 7.335938 6.789062 L 7.335938 5.273438 C 7.335938 3.875 8.476562 2.734375 9.878906 2.734375 L 20.277344 2.734375 C 21.675781 2.734375 22.816406 3.875 22.816406 5.273438 Z" /></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: X/é”™è¯¯æ ‡è®° (6.svg)
        FileText: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 26.097656 27.070312 C 25.742188 27.070312 25.390625 26.933594 25.117188 26.664062 L 2.917969 4.464844 C 2.375 3.921875 2.375 3.046875 2.917969 2.503906 C 3.460938 1.960938 4.335938 1.960938 4.878906 2.503906 L 27.078125 24.703125 C 27.621094 25.246094 27.621094 26.121094 27.078125 26.664062 C 26.808594 26.933594 26.457031 27.070312 26.097656 27.070312 Z" /><path d="M 3.898438 27.070312 C 3.542969 27.070312 3.191406 26.933594 2.917969 26.664062 C 2.375 26.121094 2.375 25.246094 2.917969 24.703125 L 25.117188 2.503906 C 25.660156 1.960938 26.535156 1.960938 27.078125 2.503906 C 27.621094 3.046875 27.621094 3.921875 27.078125 4.464844 L 4.878906 26.664062 C 4.609375 26.933594 4.257812 27.070312 3.898438 27.070312 Z" /></svg>,
        AlertCircle: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="12" x2="12" y1="8" y2="12"></line><line x1="12" x2="12.01" y1="16" y2="16"></line></svg>,
        UserX: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><line x1="19" x2="19" y1="8" y2="12"></line><line x1="19" x2="15" y1="12" y2="16"></line></svg>,
        ChevronDown: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="6 9 12 15 18 9"></polyline></svg>,
        ChevronRight: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"></polyline></svg>,
        // æ–°è®¾è®¡å›¾æ ‡: å¡è½¦ (8.svg)
        Truck: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 30 30" fill="currentColor" className={className}><path d="M 27.566406 14.511719 L 27.375 14.511719 L 25.925781 10.613281 C 25.632812 9.871094 24.894531 9.355469 24.085938 9.355469 L 19.1875 9.355469 L 19.1875 6.777344 C 19.1875 5.714844 18.320312 4.84375 17.253906 4.84375 L 2.429688 4.84375 C 1.367188 4.84375 0.496094 5.714844 0.496094 6.777344 L 0.496094 20.3125 C 0.496094 21.378906 1.367188 22.246094 2.429688 22.246094 L 3.816406 22.246094 C 4.105469 23.34375 5.105469 24.179688 6.296875 24.179688 C 7.070312 24.179688 7.75 23.828125 8.230469 23.3125 C 8.714844 23.859375 9.390625 24.179688 10.164062 24.179688 C 11.359375 24.179688 12.355469 23.34375 12.648438 22.246094 L 21.1875 22.246094 C 21.476562 23.34375 22.476562 24.179688 23.667969 24.179688 C 24.859375 24.179688 25.859375 23.34375 26.148438 22.246094 L 27.566406 22.246094 C 28.632812 22.246094 29.5 21.378906 29.5 20.3125 L 29.5 16.445312 C 29.5 15.382812 28.632812 14.511719 27.566406 14.511719 Z M 6.296875 22.890625 C 5.589844 22.890625 5.007812 22.3125 5.007812 21.601562 C 5.007812 20.894531 5.589844 20.3125 6.296875 20.3125 C 7.007812 20.3125 7.585938 20.894531 7.585938 21.601562 C 7.585938 22.3125 7.007812 22.890625 6.296875 22.890625 Z M 10.164062 22.890625 C 9.457031 22.890625 8.875 22.3125 8.875 21.601562 C 8.875 20.894531 9.457031 20.3125 10.164062 20.3125 C 10.875 20.3125 11.453125 20.894531 11.453125 21.601562 C 11.453125 22.3125 10.875 22.890625 10.164062 22.890625 Z M 17.898438 20.957031 L 12.648438 20.957031 C 12.355469 19.863281 11.359375 19.023438 10.164062 19.023438 C 9.390625 19.023438 8.714844 19.378906 8.230469 19.894531 C 7.75 19.347656 7.070312 19.023438 6.296875 19.023438 C 5.105469 19.023438 4.105469 19.863281 3.816406 20.957031 L 2.429688 20.957031 C 2.078125 20.957031 1.785156 20.667969 1.785156 20.3125 L 1.785156 17.734375 L 17.898438 17.734375 Z M 17.898438 16.445312 L 1.785156 16.445312 L 1.785156 6.777344 C 1.785156 6.425781 2.078125 6.132812 2.429688 6.132812 L 17.253906 6.132812 C 17.609375 6.132812 17.898438 6.425781 17.898438 6.777344 Z M 22.410156 10.644531 L 24.085938 10.644531 C 24.34375 10.644531 24.601562 10.808594 24.699219 11.066406 L 25.988281 14.511719 L 22.410156 14.511719 Z M 23.699219 22.890625 C 22.992188 22.890625 22.410156 22.3125 22.410156 21.601562 C 22.410156 20.894531 22.992188 20.3125 23.699219 20.3125 C 24.410156 20.3125 24.988281 20.894531 24.988281 21.601562 C 24.988281 22.3125 24.410156 22.890625 23.699219 22.890625 Z M 28.210938 17.089844 L 26.921875 17.089844 C 26.570312 17.089844 26.277344 17.382812 26.277344 17.734375 C 26.277344 18.089844 26.570312 18.378906 26.921875 18.378906 L 28.210938 18.378906 L 28.210938 20.3125 C 28.210938 20.667969 27.921875 20.957031 27.566406 20.957031 L 26.183594 20.957031 C 25.890625 19.863281 24.894531 19.023438 23.699219 19.023438 C 22.507812 19.023438 21.507812 19.863281 21.21875 20.957031 L 19.1875 20.957031 L 19.1875 10.644531 L 21.121094 10.644531 L 21.121094 15.15625 C 21.121094 15.511719 21.414062 15.800781 21.765625 15.800781 L 27.566406 15.800781 C 27.921875 15.800781 28.210938 16.09375 28.210938 16.445312 Z" /></svg>,
        Menu: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line></svg>,
        X: <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" x2="6" y1="6" y2="18"></line><line x1="6" x2="18" y1="6" y2="18"></line></svg>
      };
      return iconMap[name] || <span className={className}>*</span>;
    };
    // é‡å‘½åä»¥ä¾¿åœ¨JSXä¸­ä½¿ç”¨
    const Clipboard = (props) => <Icon name="Clipboard" {...props} />;
    const CheckSquare = (props) => <Icon name="CheckSquare" {...props} />;
    const ExternalLink = (props) => <Icon name="ExternalLink" {...props} />;
    const AlertTriangle = (props) => <Icon name="AlertTriangle" {...props} />;
    const Search = (props) => <Icon name="Search" {...props} />;
    const Clock = (props) => <Icon name="Clock" {...props} />;
    const Package = (props) => <Icon name="Package" {...props} />;
    const RefreshCw = (props) => <Icon name="RefreshCw" {...props} />;
    const MessageSquare = (props) => <Icon name="MessageSquare" {...props} />;
    const Calculator = (props) => <Icon name="Calculator" {...props} />;
    const FileText = (props) => <Icon name="FileText" {...props} />;
    const AlertCircle = (props) => <Icon name="AlertCircle" {...props} />;
    const UserX = (props) => <Icon name="UserX" {...props} />;
    const ChevronDown = (props) => <Icon name="ChevronDown" {...props} />;
    const ChevronRight = (props) => <Icon name="ChevronRight" {...props} />;
    const Truck = (props) => <Icon name="Truck" {...props} />;
    const Menu = (props) => <Icon name="Menu" {...props} />;
    const X = (props) => <Icon name="X" {...props} />;

    // ç”±äºåŸä»£ç ä¸­è¿˜æœ‰ ChevronDown/Upï¼Œä½†å®ƒä»¬åœ¨ JSX ä¸­æœªä½¿ç”¨ï¼Œè¿™é‡Œçœç•¥å®šä¹‰

    const Card = ({ children, className = "" }) => (
      <div className={`bg-white rounded-lg shadow-sm border border-slate-200 ${className}`}>
        {children}
      </div>
    );

    const Badge = ({ children, type = "default" }) => {
      const styles = {
        default: "bg-slate-100 text-slate-700",
        warning: "bg-amber-100 text-amber-700",
        danger: "bg-red-100 text-red-700",
        success: "bg-emerald-100 text-emerald-700",
        blue: "bg-blue-100 text-blue-700"
      };
      return (
        <span className={`px-2 py-0.5 rounded text-xs font-medium ${styles[type]}`}>
          {children}
        </span>
      );
    };

    function App() {
      const [activeTab, setActiveTab] = useState('dashboard');
      const [isSopExpanded, setIsSopExpanded] = useState(true);
      const [isDailyExpanded, setIsDailyExpanded] = useState(true);
      const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
      const [checklist, setChecklist] = useState({
        scanReturn: false,
        checkWorkbench: false,
        customerGroup: false,
        oversoldWarning: false,
      });

      const toggleCheck = (key) => {
        setChecklist(prev => ({ ...prev, [key]: !prev[key] }));
      };

      const copyToClipboard = (text) => {
        const el = document.createElement('textarea');
        el.value = text;
        document.body.appendChild(el);
        el.select();
        // ä½¿ç”¨ execCommand æ˜¯ä¸ºäº†å…¼å®¹æ—§ç¯å¢ƒå’Œ iframe é™åˆ¶
        document.execCommand('copy');
        document.body.removeChild(el);
        // å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ ä¸€ä¸ªå¤åˆ¶æˆåŠŸçš„ç®€å•UIæç¤º
      };

      // --- Feature: Decision Calculator ---
      const DecisionCalculator = () => {
        const [price, setPrice] = useState('');
        const [results, setResults] = useState(null);
        const [maxCompensateValue, setMaxCompensateValue] = useState(null);
        const [canReturnToFactory, setCanReturnToFactory] = useState(true); // æ˜¯å¦å¯ä»¥é€€å›å‚å®¶

        const calculate = (val, returnToFactory) => {
          const p = parseFloat(val);
          if (isNaN(p) || p <= 0) {
            setResults(null);
            setMaxCompensateValue(null);
            return;
          }

          // Calculate Max Compensation  
          const maxCompensation = p / 2;
          setMaxCompensateValue(maxCompensation);

          // Formula implementation
          const returnRefund = returnToFactory ? -12 : (0 - (p / 2) - 7); // æ ¹æ®æ˜¯å¦å¯é€€å›å‚å®¶ä½¿ç”¨ä¸åŒå…¬å¼
          const resend = 0;
          const refundOnly = 0 - (p / 2);
          const exchange = p - ((p / 2) + 12);

          const scenarios = [
            { id: 'returnRefund', name: 'é€€è´§é€€æ¬¾', val: returnRefund, formula: returnToFactory ? 'å›ºå®š -12 (å¯é€€å›å‚å®¶)' : '0 - (å”®ä»·/2) - 7 (ä¸å¯é€€å›å‚å®¶)' },
            { id: 'resend', name: 'è¡¥å‘', val: resend, formula: '0' },
            { id: 'refundOnly', name: 'ä»…é€€æ¬¾', val: refundOnly, formula: '0 - (å”®ä»·/2)' },
            { id: 'exchange', name: 'æ¢è´§', val: exchange, formula: 'å”®ä»· - (å”®ä»·/2 + 12)' },
          ];

          // Find max (Best) and min (Worst) values
          const maxVal = Math.max(...scenarios.map(s => s.val));
          const minVal = Math.min(...scenarios.map(s => s.val));

          setResults(scenarios.map(s => ({
            ...s,
            isBest: s.val === maxVal,
            isWorst: s.val === minVal && s.val !== maxVal // Ensure best isn't marked as worst if all equal
          })));
        };

        const handlePriceChange = (e) => {
          const val = e.target.value;
          setPrice(val);
          calculate(val, canReturnToFactory);
        };

        return (
          <div className="max-w-3xl mx-auto space-y-6">
            <Card className="p-6">
              <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
                <Calculator size={20} className="mr-2 text-blue-600" /> å”®åå†³ç­–è®¡ç®—å™¨
              </h2>

              <div className="mb-8">
                <label className="block text-sm font-medium text-slate-700 mb-2">
                  è¾“å…¥å•†å“å”®ä»· (å…ƒ)
                </label>
                <div className="relative">
                  <span className="absolute left-3 top-2.5 text-slate-400">Â¥</span>
                  <input
                    type="number"
                    value={price}
                    onChange={handlePriceChange}
                    placeholder="ä¾‹å¦‚: 50"
                    className="pl-8 w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                  />
                </div>
                <p className="text-xs text-slate-500 mt-2">
                  ç³»ç»Ÿå°†æ ¹æ®å”®ä»·è‡ªåŠ¨è®¡ç®—4ç§æ–¹æ¡ˆçš„é¢„ä¼°ç›ˆäºï¼Œå¹¶æ ‡è®°æœ€ä¼˜ä¸æœ€å·®æ–¹æ¡ˆã€‚
                </p>
              </div>

              {/* é€€å›å‚å®¶é€‰é¡¹ */}
              <div className="mb-8">
                <label className="block text-sm font-medium text-slate-700 mb-3">
                  å•†å“æ˜¯å¦å¯ä»¥é€€å›å‚å®¶ï¼Ÿ
                </label>
                <div className="flex gap-3">
                  <button
                    type="button"
                    onClick={() => {
                      setCanReturnToFactory(true);
                      if (price) calculate(price, true);
                    }}
                    className={`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${canReturnToFactory
                      ? 'bg-blue-600 text-white shadow-md'
                      : 'bg-white text-slate-600 border border-slate-300 hover:border-blue-400 hover:bg-blue-50'
                      }`}
                  >
                    âœ“ å¯ä»¥é€€å›å‚å®¶
                  </button>
                  <button
                    type="button"
                    onClick={() => {
                      setCanReturnToFactory(false);
                      if (price) calculate(price, false);
                    }}
                    className={`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${!canReturnToFactory
                      ? 'bg-blue-600 text-white shadow-md'
                      : 'bg-white text-slate-600 border border-slate-300 hover:border-blue-400 hover:bg-blue-50'
                      }`}
                  >
                    âœ— ä¸å¯ä»¥é€€å›å‚å®¶
                  </button>
                </div>
              </div>

              {/* Max Compensation Display */}
              {maxCompensateValue !== null && (
                <div className="p-4 bg-amber-50 border border-amber-300 rounded-lg mb-6">
                  <p className="text-sm font-semibold text-amber-800 flex items-center flex-wrap">
                    <AlertTriangle size={16} className="mr-2 text-amber-600 flex-shrink-0" />
                    æœ€å¤§è¡¥å¿é‡‘é¢:
                    <span className="ml-2 text-xl font-bold text-amber-900 mt-1 md:mt-0">
                      Â¥{maxCompensateValue.toFixed(2)}
                    </span>
                  </p>
                </div>
              )}

              {results && (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {results.map((item) => {
                    let cardStyle = 'bg-white border-slate-200 hover:border-slate-300';
                    if (item.isBest) cardStyle = 'bg-blue-50 border-blue-500 ring-1 ring-blue-500 shadow-md';
                    if (item.isWorst) cardStyle = 'bg-red-50 border-red-500 ring-1 ring-red-500 shadow-md';

                    return (
                      <div
                        key={item.id}
                        className={`border rounded-lg p-4 relative transition-all ${cardStyle}`}
                      >
                        {item.isBest && (
                          <span className="absolute -top-3 left-4 bg-blue-600 text-white text-xs px-2 py-1 rounded shadow-sm">
                            âœ¨ æŸå¤±æœ€å°/æœ€ä¼˜æ–¹æ¡ˆ
                          </span>
                        )}
                        {item.isWorst && (
                          <span className="absolute -top-3 left-4 bg-red-600 text-white text-xs px-2 py-1 rounded shadow-sm">
                            ğŸš« æŸå¤±æœ€å¤§/ä¸æ¨è
                          </span>
                        )}

                        <div className="flex justify-between items-start mb-2">
                          <h3 className={`font-bold ${item.isBest ? 'text-blue-800' : item.isWorst ? 'text-red-800' : 'text-slate-700'}`}>
                            {item.name}
                          </h3>
                          <span className={`text-lg font-mono font-bold ${item.val >= 0 ? 'text-emerald-600' : 'text-red-500'
                            }`}>
                            {item.val > 0 ? '+' : ''}{item.val.toFixed(2)}
                          </span>
                        </div>
                      </div>
                    );
                  })}
                </div>
              )}

              {!results && price && (
                <div className="text-center py-8 text-slate-400">
                  è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—å”®ä»·
                </div>
              )}
            </Card>
          </div>
        );
      };

      // --- Customer Blacklist Module ---
      const CustomerBlacklistModule = () => (
        <div className="max-w-4xl mx-auto space-y-6">
          <Card className="p-6">
            <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center">
              <UserX size={20} className="mr-2 text-red-600" /> é£é™©æ§åˆ¶ï¼ˆå®¢æˆ·æ‹‰é»‘ï¼‰
            </h2>

            {/* 2åˆ— 2è¡Œå¸ƒå±€ */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="border rounded-lg p-4 bg-red-50">
                <h3 className="font-bold text-red-700 mb-3">ç¬¬1æ­¥ï¼šé—®é¢˜æ’æŸ¥</h3>
                <div className="bg-white p-3 rounded border border-red-200">
                  <p className="text-sm text-slate-700 mb-2">æ’æŸ¥å®¢æˆ·èŠå¤©è®°å½•ï¼Œç¡®è®¤é—®é¢˜</p>
                  <div className="mt-2 text-xs text-slate-500 bg-slate-100 p-2 rounded">
                    è®°å½•è¯¦ç»†é—®é¢˜å’Œå®¢æˆ·è¡Œä¸º
                  </div>
                </div>
              </div>

              <div className="border rounded-lg p-4 bg-amber-50">
                <h3 className="font-bold text-amber-700 mb-3">ç¬¬2æ­¥ï¼šä¿¡æ¯åé¦ˆ</h3>
                <div className="bg-white p-3 rounded border border-amber-200">
                  <p className="text-sm text-slate-700 mb-2">å°†é—®é¢˜åŠå®¢æˆ·æ˜¯å¦ä¸ºè€å®¢å’Œæ˜¯å¦ä»æœ‰åœ¨é€”è®¢å•åé¦ˆç»™æ·¼</p>
                  <div className="mt-2 text-xs text-amber-600 bg-amber-100 p-2 rounded">
                    æä¾›å®Œæ•´ä¿¡æ¯ä¾›å†³ç­–
                  </div>
                </div>
              </div>

              <div className="border rounded-lg p-4 bg-slate-50">
                <h3 className="font-bold text-slate-700 mb-3">ç¬¬3æ­¥ï¼šè·å–æ‹‰é»‘æŒ‡ä»¤</h3>
                <div className="bg-white p-3 rounded border border-slate-200">
                  <p className="text-sm text-slate-700 mb-2">å‘æ·¼æä¾›æ‹‰é»‘å®¢æˆ·çš„åç§°å’Œå¤´åƒ</p>
                  <div className="mt-2 text-xs text-slate-500 bg-slate-100 p-2 rounded">
                    åœ¨é£é¸½å¯¹è¯æ¡†å†…å¤åˆ¶ï¼Œæ–¹ä¾¿å¿«æ·
                  </div>
                </div>
              </div>

              <div className="border rounded-lg p-4 bg-emerald-50">
                <h3 className="font-bold text-emerald-700 mb-3">ç¬¬4æ­¥ï¼šæ‰§è¡Œæ‹‰é»‘</h3>
                <div className="bg-white p-3 rounded border border-emerald-200">
                  <p className="text-sm text-slate-700 mb-2">åœ¨æœ€åè®¢å•ç»“æŸåæ‹‰é»‘</p>
                  <div className="mt-2 text-xs text-emerald-600 bg-emerald-100 p-2 rounded">
                    é‡è¦ï¼šè®¢å•ç»“æŸåå†æ‹‰é»‘ï¼Œé¿å…å½±å“æ­£å¸¸è®¢å•æµç¨‹
                  </div>
                </div>
              </div>
            </div>

            <div className="mt-6 pt-4 border-t">
              <div className="flex items-center p-4 bg-slate-100 rounded-lg">
                <AlertCircle size={20} className="mr-3 text-slate-600 flex-shrink-0" />
                <p className="text-sm text-slate-700">
                  é£é™©æ§åˆ¶è¦ç‚¹ï¼šç¡®è®¤å®¢æˆ·æ— åœ¨é€”è®¢å•åå†è¿›è¡Œæ‹‰é»‘æ“ä½œï¼Œç¡®ä¿è®¢å•æµç¨‹ä¸å—å½±å“ã€‚
                </p>
              </div>
            </div>
          </Card>
        </div>
      );

      // --- Operation Tips Module ---
      const NotesModule = () => (
        <div className="max-w-3xl mx-auto space-y-6">
          <Card className="p-6">
            <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
              <AlertCircle size={20} className="mr-2 text-orange-600" /> å®¢æœæ“ä½œæŠ€å·§
            </h2>

            <div className="space-y-6">
              {/* Tip 1 */}
              <div className="border border-slate-200 rounded-lg p-5 bg-white hover:shadow-sm transition">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center font-bold">1</div>
                  <div className="flex-1">
                    <h3 className="font-bold text-slate-800 mb-2">å–„ç”¨å®¢æˆ·å¯¹è¯æ¡†å¤‡æ³¨</h3>
                    <p className="text-sm text-slate-600 mb-3">
                      å¯¹äºæœ‰ç‰¹æ®Šæƒ…å†µæˆ–éœ€è¦é•¿æœŸå…³æ³¨çš„å®¢æˆ·ï¼ŒåŠ¡å¿…åœ¨å¯¹è¯æ¡†ä¾§è¾¹æ æ·»åŠ å¤‡æ³¨ï¼ˆè®°å½•å®¢äººé•¿æœŸè¡Œä¸ºï¼‰ï¼Œæ–¹ä¾¿åç»­æ¥å¾…æ—¶å¿«é€Ÿäº†è§£æƒ…å†µã€‚
                    </p>
                    <ImageToggler src="å®¢æˆ·å¤‡æ³¨.png" alt="å®¢æˆ·å¤‡æ³¨æ“ä½œç¤ºä¾‹" buttonText="æŸ¥çœ‹å¤‡æ³¨æ“ä½œç¤ºä¾‹" />
                  </div>
                </div>
              </div>

              {/* Tip 2 */}
              <div className="border border-slate-200 rounded-lg p-5 bg-white hover:shadow-sm transition">
                <div className="flex items-start gap-3">
                  <div className="flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold">2</div>
                  <div className="flex-1">
                    <h3 className="font-bold text-slate-800 mb-2">å¿«é€ŸæŸ¥æ‰¾è¯¥å®¢æˆ·æ‰€æœ‰è®¢å•</h3>
                    <p className="text-sm text-slate-600 mb-3">
                      åœ¨å¤„ç†å”®åæˆ–å’¨è¯¢æ—¶ï¼Œé€šè¿‡â€œæŸ¥çœ‹è¯¥å®¢æˆ·æ‰€æœ‰è®¢å•â€åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£å®¢æˆ·çš„å†å²è´­ä¹°è®°å½•ï¼Œæœ‰åŠ©äºåˆ¤æ–­å®¢æˆ·ä»·å€¼å’Œå¤„ç†ç­–ç•¥ã€‚
                    </p>
                    <ImageToggler src="æŸ¥æ‰¾å®¢æˆ·è®¢å•.png" alt="æŸ¥æ‰¾å®¢æˆ·è®¢å•æ“ä½œç¤ºä¾‹" buttonText="æŸ¥çœ‹æŸ¥æ‰¾è®¢å•æ“ä½œç¤ºä¾‹" />
                  </div>
                </div>
              </div>

            </div>
          </Card>
        </div>
      );

      // --- Sub-Components for Different Tabs ---

      const Dashboard = () => (
        <div className="space-y-6">
          {/* Top Stats/Links Row - å“åº”å¼ï¼šåœ¨ md æ–­ç‚¹ä»¥ä¸‹åˆ‡æ¢ä¸ºå•åˆ— (grid-cols-1) */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <Card className="p-4 border-l-4 border-l-blue-500">
              <h3 className="text-sm font-semibold text-slate-500 mb-2 flex items-center">
                <ExternalLink size={16} className="mr-2" /> å¸¸ç”¨å·¥å…·
              </h3>
              <div className="space-y-2">
                <a href="https://www.erp321.com" target="_blank" rel="noreferrer" className="w-full text-left p-3 rounded-lg bg-blue-50 hover:bg-blue-100 transition flex justify-between items-center group shadow-sm border border-blue-100">
                  <span className="font-semibold text-blue-800">ERPåå°ç³»ç»Ÿ</span>
                  <ExternalLink size={16} className="text-blue-500 group-hover:translate-x-0.5 transition" />
                </a>
                <a href="https://fxg.jinritemai.com" target="_blank" rel="noreferrer" className="w-full text-left p-3 rounded-lg bg-purple-50 hover:bg-purple-100 transition flex justify-between items-center group shadow-sm border border-purple-100">
                  <span className="font-semibold text-purple-800">æŠ–åº—å•†å®¶åå°</span>
                  <ExternalLink size={16} className="text-purple-500 group-hover:translate-x-0.5 transition" />
                </a>
                <button
                  onClick={() => setActiveTab('calculator')}
                  className="w-full text-left p-3 rounded-lg bg-emerald-50 hover:bg-emerald-100 transition flex justify-between items-center group shadow-sm border border-emerald-100"
                >
                  <span className="font-semibold text-emerald-800">å†³ç­–è®¡ç®—å™¨</span>
                  <ExternalLink size={16} className="text-emerald-500 group-hover:translate-x-0.5 transition" />
                </button>
                <button
                  onClick={() => setActiveTab('expressCompensation')}
                  className="w-full text-left p-3 rounded-lg bg-teal-50 hover:bg-teal-100 transition flex justify-between items-center group shadow-sm border border-teal-100"
                >
                  <span className="font-semibold text-teal-800">å¿«é€’èµ”å¿è®°å½•</span>
                  <ExternalLink size={16} className="text-teal-500 group-hover:translate-x-0.5 transition" />
                </button>
              </div>
            </Card>

            <Card className="p-4 border-l-4 border-l-emerald-500">
              <h3 className="text-sm font-semibold text-slate-500 mb-2 flex items-center">
                <Clock size={16} className="mr-2" /> ä»Šæ—¥å¿…åš (æ—¥å·¡)
              </h3>
              <div className="space-y-2">
                <div onClick={() => toggleCheck('scanReturn')} className="w-full cursor-pointer text-left p-3 rounded-lg bg-blue-50 hover:bg-blue-100 transition flex justify-between items-center group shadow-sm border border-blue-100">
                  <span className="font-semibold text-blue-800">æ‰«ç é€€è´§</span>
                  <input type="checkbox" checked={checklist.scanReturn} onClick={(e) => e.stopPropagation()} onChange={() => toggleCheck('scanReturn')} className="w-5 h-5 cursor-pointer" />
                </div>
                <div onClick={() => toggleCheck('checkWorkbench')} className="w-full cursor-pointer text-left p-3 rounded-lg bg-emerald-50 hover:bg-emerald-100 transition flex justify-between items-center group shadow-sm border border-emerald-100">
                  <span className="font-semibold text-emerald-800">å”®åå·¥ä½œå°æ£€æŸ¥</span>
                  <input type="checkbox" checked={checklist.checkWorkbench} onClick={(e) => e.stopPropagation()} onChange={() => toggleCheck('checkWorkbench')} className="w-5 h-5 cursor-pointer" />
                </div>
                <div onClick={() => toggleCheck('customerGroup')} className="w-full cursor-pointer text-left p-3 rounded-lg bg-amber-50 hover:bg-amber-100 transition flex justify-between items-center group shadow-sm border border-amber-100">
                  <span className="font-semibold text-amber-800">å®¢æˆ·ç¾¤å¤„ç†</span>
                  <input type="checkbox" checked={checklist.customerGroup} onClick={(e) => e.stopPropagation()} onChange={() => toggleCheck('customerGroup')} className="w-5 h-5 cursor-pointer" />
                </div>
                <div onClick={() => toggleCheck('oversoldWarning')} className="w-full cursor-pointer text-left p-3 rounded-lg bg-purple-50 hover:bg-purple-100 transition flex justify-between items-center group shadow-sm border border-purple-100">
                  <span className="font-semibold text-purple-800">è¶…å–è®¢å•é¢„è­¦</span>
                  <input type="checkbox" checked={checklist.oversoldWarning} onClick={(e) => e.stopPropagation()} onChange={() => toggleCheck('oversoldWarning')} className="w-5 h-5 cursor-pointer" />
                </div>

              </div>
            </Card>

            {/* é£é™©é¢„è­¦ (æ›´æ–°åçš„æ ·å¼å’Œè·³è½¬é€»è¾‘) */}
            <Card className="p-4 border-l-4 border-l-amber-500">
              <h3 className="text-sm font-semibold text-slate-500 mb-2 flex items-center">
                <AlertTriangle size={16} className="mr-2 text-amber-500" /> é£é™©é¢„è­¦ (ç‚¹å‡»æŸ¥çœ‹æµç¨‹)
              </h3>
              <div className="space-y-2">

                {/* Item 1: Malicious Buyers -> Links to Notes/Manual */}
                <button
                  onClick={() => setActiveTab('blacklist')}
                  className="w-full text-left p-3 rounded-lg bg-red-50 hover:bg-red-100 transition flex justify-between items-center group shadow-sm border border-red-100"
                >
                  <div className="flex flex-col">
                    <span className="font-semibold text-red-800">ğŸ˜  æ¶æ„ä¹°å®¶</span>
                    <span className="text-xs text-red-600">æ ¸å®æ‹‰é»‘ / å‡çº§å¤„ç†</span>
                  </div>
                  <ExternalLink size={16} className="text-red-500 group-hover:translate-x-0.5 transition" />
                </button>

                {/* Item 2: Overdue After-sales -> Links to Notes/Manual */}
                <button
                  onClick={() => setActiveTab('overdue')}
                  className="w-full text-left p-3 rounded-lg bg-amber-50 hover:bg-amber-100 transition flex justify-between items-center group shadow-sm border border-amber-100"
                >
                  <div className="flex flex-col">
                    <span className="font-semibold text-amber-800">ğŸ“… è¶…æœŸå”®å (1ä¸ªæœˆ)</span>
                    <span className="text-xs text-amber-600">éœ€æä¾›ç­¾æ”¶æ—¶é—´è¯æ˜æˆªå›¾</span>
                  </div>
                  <ExternalLink size={16} className="text-amber-500 group-hover:translate-x-0.5 transition" />
                </button>

                {/* Item 3: Inconsistent Items (ç‰©å“ä¸ç¬¦) -> Links to Returns/Scanning Flow */}
                <button
                  onClick={() => setActiveTab('returns')}
                  className="w-full text-left p-3 rounded-lg bg-emerald-50 hover:bg-emerald-100 transition flex justify-between items-center group shadow-sm border border-emerald-100"
                >
                  <div className="flex flex-col">
                    <span className="font-semibold text-emerald-800">âš ï¸ é€€è´§æ‰«ç æ³¨æ„</span>
                    <span className="text-xs text-emerald-600 font-bold">åŠ¡å¿…å½•åˆ¶è§†é¢‘ç•™è¯</span>
                  </div>
                  <ExternalLink size={16} className="text-emerald-500 group-hover:translate-x-0.5 transition" />
                </button>
              </div>
            </Card>
          </div>

          {/* Quick Actions Grid - 2è¡Œ3åˆ—å¸ƒå±€ */}
          <h2 className="text-lg font-bold text-slate-800 mt-6">å¿«é€Ÿå†³ç­–SOP</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button onClick={() => setActiveTab('refunds')} className="p-4 bg-white border border-blue-200 hover:border-blue-500 hover:shadow-md hover:bg-blue-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition group">
              <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform">
                <Search size={20} />
              </div>
              <span className="font-bold text-blue-700 text-sm md:text-base">ä»…é€€æ¬¾ / æ‹¦æˆª</span>
            </button>
            <button onClick={() => setActiveTab('returns')} className="p-4 bg-white border hover:border-emerald-500 hover:shadow-md hover:bg-emerald-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition">
              <div className="w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600">
                {/* æ–°è®¾è®¡: æ‰«æå™¨å›¾æ ‡ (2.svg) */}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 30 30" fill="currentColor">
                  <path d="M 1.765625 2.292969 C 1.765625 1.734375 2.21875 1.28125 2.78125 1.28125 L 10.070312 1.28125 C 10.628906 1.28125 11.085938 1.734375 11.085938 2.292969 C 11.085938 2.851562 10.628906 3.304688 10.070312 3.304688 L 3.792969 3.304688 L 3.792969 9.585938 C 3.792969 10.144531 3.339844 10.597656 2.78125 10.597656 C 2.21875 10.597656 1.765625 10.144531 1.765625 9.585938 Z M 18.78125 2.292969 C 18.78125 1.734375 19.234375 1.28125 19.792969 1.28125 L 27.085938 1.28125 C 27.644531 1.28125 28.097656 1.734375 28.097656 2.292969 L 28.097656 9.585938 C 28.097656 10.144531 27.644531 10.597656 27.085938 10.597656 C 26.527344 10.597656 26.074219 10.144531 26.074219 9.585938 L 26.074219 3.304688 L 19.792969 3.304688 C 19.234375 3.304688 18.78125 2.851562 18.78125 2.292969 Z M 2.78125 18.292969 C 3.339844 18.292969 3.792969 18.75 3.792969 19.308594 L 3.792969 25.585938 L 10.070312 25.585938 C 10.628906 25.585938 11.085938 26.039062 11.085938 26.597656 C 11.085938 27.160156 10.628906 27.613281 10.070312 27.613281 L 2.78125 27.613281 C 2.21875 27.613281 1.765625 27.160156 1.765625 26.597656 L 1.765625 19.308594 C 1.765625 18.75 2.21875 18.292969 2.78125 18.292969 Z M 27.085938 18.292969 C 27.644531 18.292969 28.097656 18.75 28.097656 19.308594 L 28.097656 21.199219 C 28.097656 21.757812 27.644531 22.210938 27.085938 22.210938 C 26.527344 22.210938 26.074219 21.757812 26.074219 21.199219 L 26.074219 19.308594 C 26.074219 18.75 26.527344 18.292969 27.085938 18.292969 Z M 27.085938 24.234375 C 27.644531 24.234375 28.097656 24.691406 28.097656 25.25 L 28.097656 26.597656 C 28.097656 27.160156 27.644531 27.613281 27.085938 27.613281 L 19.792969 27.613281 C 19.234375 27.613281 18.78125 27.160156 18.78125 26.597656 C 18.78125 26.039062 19.234375 25.585938 19.792969 25.585938 L 26.074219 25.585938 L 26.074219 25.25 C 26.074219 24.691406 26.527344 24.234375 27.085938 24.234375 Z" />
                  <path d="M 0.417969 14.445312 C 0.417969 13.886719 0.871094 13.433594 1.429688 13.433594 L 28.4375 13.433594 C 28.996094 13.433594 29.449219 13.886719 29.449219 14.445312 C 29.449219 15.003906 28.996094 15.460938 28.4375 15.460938 L 1.429688 15.460938 C 0.871094 15.460938 0.417969 15.003906 0.417969 14.445312 Z" />
                </svg>
              </div>
              <span className="font-medium text-slate-700 text-sm md:text-base">é€€è´§æ‰«ç </span>
            </button>
            <button onClick={() => setActiveTab('replace')} className="p-4 bg-white border hover:border-indigo-500 hover:shadow-md hover:bg-indigo-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition">
              <div className="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600">
                {/* æ–°è®¾è®¡: äº¤æ¢ç®­å¤´å›¾æ ‡ (3.svg) */}
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 30 30" fill="currentColor">
                  <path d="M 29.132812 9.597656 L 22.144531 3.210938 C 21.878906 2.96875 21.496094 2.90625 21.164062 3.050781 C 20.839844 3.195312 20.636719 3.503906 20.636719 3.863281 L 20.636719 6.839844 L 12.328125 6.839844 C 11.835938 6.839844 11.4375 7.242188 11.4375 7.730469 L 11.4375 12.773438 C 11.4375 13.265625 11.835938 13.664062 12.328125 13.664062 L 20.636719 13.664062 L 20.636719 16.546875 C 20.628906 16.636719 20.636719 16.730469 20.65625 16.824219 C 20.734375 17.207031 21.050781 17.484375 21.453125 17.519531 C 21.472656 17.519531 21.492188 17.523438 21.515625 17.523438 C 21.527344 17.523438 21.535156 17.523438 21.546875 17.523438 C 21.65625 17.523438 21.765625 17.503906 21.871094 17.460938 C 21.992188 17.414062 22.101562 17.339844 22.1875 17.246094 L 29.128906 10.902344 C 29.3125 10.742188 29.417969 10.503906 29.417969 10.25 C 29.417969 9.996094 29.3125 9.761719 29.132812 9.597656 Z M 21.535156 11.875 L 13.226562 11.875 L 13.226562 8.621094 L 21.535156 8.621094 C 22.027344 8.621094 22.425781 8.222656 22.425781 7.730469 L 22.425781 5.886719 L 27.203125 10.25 L 22.425781 14.613281 L 22.425781 12.769531 C 22.425781 12.277344 22.027344 11.875 21.535156 11.875 Z" />
                  <path d="M 17.960938 15.445312 L 9.652344 15.445312 L 9.652344 12.464844 C 9.652344 12.113281 9.457031 11.804688 9.140625 11.660156 C 8.8125 11.511719 8.429688 11.570312 8.15625 11.808594 C 7.742188 12.171875 7.324219 12.535156 6.90625 12.902344 C 6.5 13.257812 6.09375 13.613281 5.691406 13.96875 L 4.4375 15.066406 C 3.546875 15.851562 2.65625 16.632812 1.765625 17.414062 L 0.875 18.195312 C 0.6875 18.355469 0.582031 18.59375 0.582031 18.851562 C 0.582031 19.109375 0.6875 19.351562 0.871094 19.511719 C 1.285156 19.871094 1.695312 20.230469 2.105469 20.59375 C 2.519531 20.953125 2.929688 21.3125 3.339844 21.675781 L 4.617188 22.796875 C 5.5 23.570312 6.382812 24.34375 7.265625 25.117188 L 8.117188 25.863281 C 8.230469 25.976562 8.371094 26.058594 8.527344 26.097656 C 8.605469 26.121094 8.6875 26.128906 8.765625 26.128906 C 8.894531 26.128906 9.019531 26.101562 9.136719 26.046875 C 9.457031 25.90625 9.652344 25.601562 9.652344 25.246094 L 9.652344 22.269531 L 17.960938 22.269531 C 18.453125 22.269531 18.855469 21.867188 18.855469 21.375 L 18.855469 16.335938 C 18.855469 15.84375 18.453125 15.445312 17.960938 15.445312 Z M 8.757812 17.226562 L 17.066406 17.226562 L 17.066406 20.480469 L 8.757812 20.480469 C 8.265625 20.480469 7.863281 20.878906 7.863281 21.371094 L 7.863281 23.273438 L 5.632812 21.316406 C 4.746094 20.535156 3.855469 19.753906 2.96875 18.976562 L 2.828125 18.851562 L 5.796875 16.25 C 6.484375 15.644531 7.175781 15.039062 7.863281 14.433594 L 7.863281 16.332031 C 7.863281 16.824219 8.265625 17.226562 8.757812 17.226562 Z" />
                </svg>
              </div>
              <span className="font-medium text-slate-700 text-sm md:text-base">è¡¥å‘ / æ¢è´§</span>
            </button>
            <button onClick={() => setActiveTab('overdue')} className="p-4 bg-white border hover:border-amber-500 hover:shadow-md hover:bg-amber-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition">
              <div className="w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center text-amber-600">
                <Clock size={20} />
              </div>
              <span className="font-medium text-slate-700 text-sm md:text-base">è¶…æœŸå”®å</span>
            </button>
            <button onClick={() => setActiveTab('oversold')} className="p-4 bg-white border hover:border-red-500 hover:shadow-md hover:bg-red-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition">
              <div className="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-red-600">
                <AlertTriangle size={20} />
              </div>
              <span className="font-medium text-slate-700 text-sm md:text-base">è¶…å–å¤„ç†</span>
            </button>
            <button onClick={() => setActiveTab('wrongShipment')} className="p-4 bg-white border hover:border-purple-500 hover:shadow-md hover:bg-purple-50 rounded-lg flex flex-col items-center justify-center space-y-2 transition">
              <div className="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600">
                <FileText size={20} />
              </div>
              <span className="font-medium text-slate-700 text-sm md:text-base">é”™å‘å¤„ç†</span>
            </button>
          </div>
        </div>
      );

      const ImageToggler = ({ src, alt, buttonText = "æŸ¥çœ‹ç¤ºä¾‹å›¾ç‰‡" }) => {
        const [isOpen, setIsOpen] = useState(false);
        return (
          <div className="mt-2">
            <button
              onClick={() => setIsOpen(!isOpen)}
              className="flex items-center text-sm text-blue-600 hover:text-blue-800 font-medium transition focus:outline-none"
            >
              {isOpen ? <ChevronDown size={16} className="mr-1" /> : <ChevronRight size={16} className="mr-1" />}
              {buttonText}
            </button>
            {isOpen && (
              <div className="mt-2 transition-all duration-300 ease-in-out">
                <img src={src} alt={alt} className="w-full max-w-2xl rounded border border-slate-200 shadow-sm" />
              </div>
            )}
          </div>
        );
      };

      const RefundsModule = () => (
        <div className="max-w-5xl mx-auto space-y-6">
          <Card className="p-6">
            <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
              <Search size={20} className="mr-2 text-blue-600" /> ä»…é€€æ¬¾å¤„ç† SOP
            </h2>

            <div className="space-y-6">
              {/* æŠ–åº—å·¥ä½œå°å¤„ç†æµç¨‹ */}
              <div className="border-2 border-blue-200 rounded-lg p-5 bg-blue-50">
                <h3 className="text-lg font-bold text-blue-800 mb-4">
                  æŠ–åº—å·¥ä½œå°æ“ä½œ
                </h3>

                <div className="space-y-4">
                  {/* æ­¥éª¤1 */}
                  <div className="bg-white rounded-lg p-4 border border-blue-200">
                    <div className="flex items-start gap-3">
                      <div className="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">1</div>
                      <div className="flex-1">
                        <h4 className="font-bold text-slate-800 mb-2">å¦‚åŒ…è£¹åœ¨é€”ï¼Œéœ€è¦æ‰‹åŠ¨å¤åˆ¶å¿«é€’å·ï¼Œå‘è‡³å¿«é€’ç¾¤å†…è¿›è¡Œæ‰‹åŠ¨æ‹¦æˆª</h4>
                        <p className="text-sm text-slate-600 mb-2">åé¦ˆæ‹¦æˆªæˆåŠŸåï¼ŒåŒæ„é€€æ¬¾å³å¯ã€‚</p>
                        <ImageToggler src="åŒæ„é€€æ¬¾ç¤ºä¾‹å›¾.png" alt="æ“ä½œè¦ç‚¹ç¤ºä¾‹" />
                      </div>
                    </div>
                  </div>

                  {/* æ­¥éª¤2 */}
                  <div className="bg-white rounded-lg p-4 border border-blue-200">
                    <div className="flex items-start gap-3">
                      <div className="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">2</div>
                      <div className="flex-1">
                        <h4 className="font-bold text-slate-800 mb-2">å¦‚åŒ…è£¹æ˜¾ç¤ºå¾…å–ä»¶/æ´¾é€ä¸­</h4>
                        <p className="text-sm text-slate-600 mb-2">åˆ™éœ€è¦æ‰‹åŠ¨å¤åˆ¶å¿«é€’å·ï¼Œå‘è‡³å¿«é€’ç¾¤å†…è¿›è¡Œæ‰‹åŠ¨æ‹¦æˆªï¼Œ<span className="font-bold text-red-600">ç­‰å¾…ç¾¤å†…åé¦ˆæˆ–ç¡®è®¤å¿«é€’ä¿¡æ¯æ˜¾ç¤ºé€€è´§ä¸­æ—¶</span>ï¼Œå†å»åŒæ„é€€æ¬¾ã€‚ï¼ˆå¦åˆ™ä¼šæœ‰å»ä»¶å¯èƒ½ï¼‰</p>
                        <ImageToggler src="å¾…å–ä»¶ç¤ºä¾‹å›¾.png" alt="å¾…å–ä»¶çŠ¶æ€ç¤ºä¾‹" />
                      </div>
                    </div>
                  </div>

                  {/* æ­¥éª¤3 */}
                  <div className="bg-white rounded-lg p-4 border border-blue-200">
                    <div className="flex items-start gap-3">
                      <div className="flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">3</div>
                      <div className="flex-1">
                        <h4 className="font-bold text-slate-800 mb-3">å¦‚å·²ç»ç­¾æ”¶åä»…é€€æ¬¾ï¼Œæ£€æŸ¥èŠå¤©è®°å½•æ— å…¶ä»–é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œæ‹’ç»ä»…é€€æ¬¾ï¼Œå‚è€ƒå¡«å†™å¦‚ä¸‹ï¼š</h4>

                        <div className="space-y-3">
                          <ImageToggler src="æ‹’ç»ä»…é€€æ¬¾ç¤ºä¾‹å›¾.png" alt="åå•†æ–‡æ¡ˆä¸æ“ä½œæ­¥éª¤ç¤ºä¾‹" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </Card>
        </div>
      );

      const ReturnsModule = () => (
        <div className="max-w-3xl mx-auto space-y-6">
          <Card className="p-6">
            <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center">
              <Package size={20} className="mr-2 text-emerald-600" /> é€€è´§æ‰«ç æ³¨æ„äº‹é¡¹
            </h2>

            <div className="bg-amber-50 border-l-4 border-amber-400 p-4 mb-6">
              <h3 className="font-bold text-amber-800 mb-2">âš ï¸ æ‰«ç å‰å¿…æŸ¥ (é¿å…æ— æ³•å½•å…¥)</h3>
              <ul className="list-disc list-inside text-sm text-amber-800 space-y-1">
                <li>è¾“å…¥æ³•å¿…é¡»åˆ‡æ¢è‡³ï¼š<span className="font-bold bg-white px-1 rounded">è‹±æ–‡æ¨¡å¼</span> (å¦åˆ™é¡ºä¸°å•å·ä¼šä¹±ç )</li>
                <li>ERPå…‰æ ‡ä½ç½®ï¼šå¿…é¡»ç‚¹å‡»<span className="font-bold bg-white px-1 rounded">å¿«é€’å•å·</span>è¾“å…¥æ¡†</li>
                <li>æ‰«ç å¯¹è±¡ï¼šåªæ‰«å¿«é€’å•å·ï¼Œä¸è¦æ‰«çº¿ä¸Šè®¢å•å·</li>
              </ul>
            </div>

            <div className="space-y-4">
              <div className="p-4 border rounded-lg hover:shadow-sm transition">
                <h3 className="font-bold text-slate-700">æ— ä¿¡æ¯ä»¶/æ— æ³•æ‰«æ</h3>
                <p className="text-sm text-slate-500 mt-1">ç³»ç»Ÿæç¤ºâ€œæ— æ­¤å•â€æˆ–æ‰«ä¸å‡ºæ¥æ—¶ï¼š</p>
                <div className="mt-2 text-sm bg-slate-100 p-3 rounded">
                  1. å°è¯•æ‰‹åŠ¨è¾“å…¥å•å·æŸ¥è¯¢ã€‚<br />
                  2. ä½¿ç”¨â€œæ— ä¿¡æ¯ä»¶ç»‘å®šè®¢å•â€åŠŸèƒ½ã€‚<br />
                  3. å¦‚ä»æ— æ³•è§£å†³ï¼Œè¿›è¡Œâ€œå”®åé—®é¢˜ç™»è®°â€ï¼ˆæ‹ç…§/ç•™æ¡£ï¼‰ã€‚
                </div>
              </div>
            </div>
          </Card>
        </div>
      );

      const ReplaceModule = () => (
        <div className="max-w-3xl mx-auto space-y-6">
          {/* å“åº”å¼ï¼šåœ¨ md æ–­ç‚¹ä»¥ä¸‹åˆ‡æ¢ä¸ºå•åˆ— (grid-cols-1) */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* Online Flow */}
            <Card className="p-6 border-t-4 border-t-blue-500">
              <h3 className="text-lg font-bold text-blue-700 mb-4">çº¿ä¸Šå”®å (æŠ–åº—æ¥æº)</h3>
              <div className="text-sm text-slate-600 mb-4">
                æŒ‡é€šè¿‡æŠ–åº—å®˜æ–¹ç”³è¯·çš„å”®åå•ï¼Œå·²è‡ªåŠ¨åŒæ­¥è‡³ERPã€‚
              </div>
              <ol className="list-decimal list-inside space-y-3 text-sm text-slate-700">
                <li className="p-2 bg-slate-50 rounded">è¿›å…¥ ERP<span className="font-bold text-blue-600">ã€Œè®¢å•-å”®åï¼ˆæé€Ÿç‰ˆï¼‰ã€</span></li>
                <li className="p-2 bg-slate-50 rounded">é€šè¿‡<span className="font-bold text-blue-600">ã€Œå”®åå•å·ã€</span>æˆ–çº¿ä¸Šå•å·æœç´¢</li>
                <li className="p-2 bg-slate-50 rounded">å‹¾é€‰è®¢å•ï¼Œç‚¹å‡»<span className="font-bold text-blue-600">ã€Œç¡®è®¤ã€</span></li>
                <li className="p-2 bg-slate-50 rounded">ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå‘è´§å•</li>
              </ol>
            </Card>

            {/* Offline Flow */}
            <Card className="p-6 border-t-4 border-t-orange-500">
              <h3 className="text-lg font-bold text-orange-700 mb-4">çº¿ä¸‹/æ‰‹å·¥å”®å</h3>
              <div className="text-sm text-slate-600 mb-4">
                æŒ‡é€šè¿‡å®¢æœç¾¤ç­”åº”å”®å,æˆ–é”™å‘ç­‰ç³»ç»Ÿæ— æ³•æ»¡è¶³çš„å”®åå•,éœ€è¦åœ¨ERPä¸­æ‰‹åŠ¨åˆ›å»ºã€‚
              </div>
              <ol className="list-decimal list-inside space-y-3 text-sm text-slate-700">
                <li className="p-2 bg-slate-50 rounded">ERP ç‚¹å‡»<span className="font-bold">ã€Œæ‰‹å·¥åˆ›å»ºå”®åå•ã€</span></li>
                <li className="p-2 bg-slate-50 rounded">è¾“å…¥<span className="font-bold">åŸçº¿ä¸Šè®¢å•å·</span>å…³è”ä¿¡æ¯</li>
                <li className="p-2 bg-slate-50 rounded">ç±»å‹é€‰æ‹©ï¼š<span className="font-bold">è¡¥å‘</span> æˆ– <span className="font-bold">æ¢è´§</span></li>
                <li className="p-2 bg-slate-50 rounded">æ·»åŠ å¯¹åº”å•†å“åŠæ•°é‡</li>
                <li className="p-2 bg-orange-50 rounded border border-orange-200">
                  <span className="text-orange-700 font-bold">å…³é”®ï¼š</span>åˆ›å»ºåéœ€å°†æ–°å¿«é€’å·æ‰‹åŠ¨å‘åˆ°å®¢æœç¾¤ï¼Œå®¢æˆ·åœ¨æŠ–åº—çœ‹ä¸åˆ°ã€‚
                </li>
              </ol>
            </Card>
          </div>


        </div>
      );

      const OverdueModule = () => (
        <div className="max-w-3xl mx-auto space-y-6">
          <Card className="p-6">
            <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
              <Clock size={20} className="mr-2 text-amber-600" /> è¶…æœŸå”®åå¤„ç†æµç¨‹
            </h2>

            <div className="space-y-6">
              {/* å®šä¹‰å¡ç‰‡ */}
              <div className="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-r-lg">
                <h3 className="font-bold text-amber-800 text-lg mb-2 flex items-center">
                  <AlertCircle size={18} className="mr-2" /> ä»€ä¹ˆæ˜¯è¶…æœŸå”®åï¼Ÿ
                </h3>
                <p className="text-amber-900 font-medium">
                  è®¢å•çŠ¶æ€æ˜¾ç¤ºâ€œå·²å®Œæˆâ€ä¸”æ—¶é—´è¶…è¿‡ <span className="text-red-600 font-bold text-lg mx-1">1ä¸ªæœˆ</span> çš„å”®åç”³è¯·ã€‚
                </p>
              </div>

              {/* æ ¸å¿ƒæ³¨æ„äº‹é¡¹ */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="border border-slate-200 rounded-lg p-5 hover:shadow-md transition bg-white">
                  <div className="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-red-600 mb-3">
                    <AlertTriangle size={20} />
                  </div>
                  <h4 className="font-bold text-slate-800 mb-2">è§„é¿è¯„ä»·é£é™©</h4>
                  <p className="text-sm text-slate-600 leading-relaxed">
                    å¤„ç†è¶…æœŸå”®åæ—¶ï¼Œéœ€ç‰¹åˆ«æ³¨æ„å®¢æˆ·æƒ…ç»ªï¼Œ<span className="font-bold text-slate-800">å°½é‡é¿å…äº§ç”Ÿå·®è¯„æˆ–æŠ•è¯‰é£é™©</span>ã€‚å¦‚é‡éš¾ç¼ å®¢æˆ·ï¼Œè¯·<button onClick={() => setActiveTab('blacklist')} className="text-blue-600 hover:underline font-medium focus:outline-none">åŠæ—¶å‡çº§å¤„ç† &rarr;</button>ã€‚
                  </p>
                </div>

                <div className="border border-slate-200 rounded-lg p-5 hover:shadow-md transition bg-white">
                  <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-3">
                    <FileText size={20} />
                  </div>
                  <h4 className="font-bold text-slate-800 mb-2">æäº¤ç­¾æ”¶è¯æ˜</h4>
                  <p className="text-sm text-slate-600 leading-relaxed">
                    å¿…é¡»æä¾›<span className="font-bold text-slate-800">ç‰©æµç­¾æ”¶è¯æ˜æˆªå›¾</span>ã€‚è¯·åœ¨å¿«é€’å®˜ç½‘æˆ–ç¬¬ä¸‰æ–¹å¹³å°æŸ¥è¯¢å¹¶æˆªå›¾ä¿å­˜ï¼Œä½œä¸ºå‡­è¯ä¸Šä¼ ã€‚
                  </p>
                </div>
              </div>

              {/* æ“ä½œæç¤º */}
              <div className="bg-slate-50 rounded-lg p-4 border border-slate-200">
                <h4 className="font-bold text-slate-700 mb-3 flex items-center">
                  <CheckSquare size={16} className="mr-2" /> å¤„ç†æ­¥éª¤ç®€è¿°
                </h4>
                <ol className="list-decimal list-inside space-y-2 text-sm text-slate-600">
                  <li>æ ¸å®è®¢å•å®Œæˆæ—¶é—´æ˜¯å¦è¶…è¿‡1ä¸ªæœˆã€‚</li>
                  <li>æŸ¥è¯¢å¹¶æˆªå›¾ç‰©æµç­¾æ”¶ä¿¡æ¯ã€‚</li>
                  <li>ä¸å®¢æˆ·æ²Ÿé€šï¼Œç¡®è®¤å”®åè¯‰æ±‚ï¼Œè¯„ä¼°é£é™©ã€‚</li>
                  <li>æŒ‰æµç¨‹æäº¤å”®åç”³è¯·ï¼Œå¹¶é™„ä¸Šç­¾æ”¶è¯æ˜ã€‚</li>
                </ol>
              </div>
            </div>
          </Card>
        </div>
      );

      const OversoldModule = () => {
        // State for the decision tree
        // currentStep: current step ID
        // history: array of previous steps with selections for display
        const [currentStep, setCurrentStep] = useState('start');
        const [history, setHistory] = useState([]);

        // Decision Tree Data for Oversold handling
        const decisionTree = {
          start: {
            question: "ä¸Šè´§çŠ¶æ€",
            options: [
              { label: "å¯ä»¥ç»§ç»­ä¸Šè´§", next: "stock_status" },
              { label: "ä¸å¯ä»¥ç»§ç»­ä¸Šè´§", next: "no_stock_status" },
            ]
          },
          stock_status: {
            question: "è®¢å•å•†å“æ•°é‡",
            options: [
              { label: "å¤šä¸ªå•†å“", next: "result_a1" },
              { label: "å•ä¸ªå•†å“", next: "result_a2" },
            ]
          },
          no_stock_status: {
            question: "è®¢å•å•†å“æ•°é‡",
            options: [
              { label: "å¤šä¸ªå•†å“", next: "result_b1" },
              { label: "å•ä¸ªå•†å“", next: "result_b2" },
            ]
          },
          result_a1: {
            type: 'result',
            title: "å¯ä»¥ä¸Šè´§ + å¤šä¸ªå•†å“",
            content: "å°†è®¢å•ä¸­å…¶ä»–æœ‰è´§å•†å“æ­£å¸¸æ‰“åŒ…å‘è´§ã€‚\n\nç”µè”å®¢æˆ·ï¼šæ²Ÿé€šä¿®æ”¹ç¼ºè´§å•†å“çš„å‘è´§æ—¶é—´ã€‚\n\nè‹¥å®åœ¨æ— æ³•è”ç³»ï¼šå…ˆç­‰å¾…å®¢æˆ·åé¦ˆã€‚\n\nåç»­å¤„ç†ï¼šæ ¹æ®æƒ…å†µå®‰æ’è¡¥å‘æˆ–é€€æ¬¾ã€‚\n\næ³¨æ„ï¼šéœ€æ‰‹åŠ¨é¢‘ç¹æ£€æŸ¥è®¢å•çŠ¶æ€ï¼Œé¿å…æŸå¤±ã€‚",
            color: "blue"
          },
          result_a2: {
            type: 'result',
            title: "å¯ä»¥ä¸Šè´§ + å•ä¸ªå•†å“",
            content: "ç”µè”å®¢æˆ·ï¼šæ²Ÿé€šä¿®æ”¹å‘è´§æ—¶é—´ã€‚\n\nè‹¥å®åœ¨æ— æ³•è”ç³»ï¼šåœ¨ç³»ç»Ÿä¸­ç‚¹å‡»æå‰æ½æ”¶ï¼ˆé˜²æ­¢è¶…æ—¶ï¼‰ã€‚\n\nç­‰å¾…å®¢æˆ·åé¦ˆåï¼Œå†æ¬¡ç”µè”å®¢æˆ·ç¡®è®¤ä¿®æ”¹æ—¶é—´ã€‚\n\nå‘è´§æ“ä½œï¼šä½¿ç”¨åŸå¿«é€’å•å·ç»§ç»­å‘è´§å³å¯ã€‚\n\næ³¨æ„ï¼šå› å·²ç‚¹å‡»æ½æ”¶ï¼Œè‹¥å®¢æˆ·ä¸­é€”ç”³è¯·é€€è´§ï¼Œéœ€åŠæ—¶è”ç³»å¿«é€’æ‹¦æˆªåŒ…è£¹ã€‚",
            color: "blue"
          },
          result_b1: {
            type: 'result',
            title: "ä¸å¯ä¸Šè´§ + å¤šä¸ªå•†å“",
            content: "å°†è®¢å•ä¸­å…¶ä»–æœ‰è´§å•†å“æ­£å¸¸æ‰“åŒ…å‘è´§ã€‚\n\nä¸èƒ½å‘è´§çš„ç‰©å“ï¼šç”µè”å®¢æˆ·æ²Ÿé€šé€€æ¬¾ã€‚\n\nè‹¥å®åœ¨æ— æ³•è”ç³»ï¼šå…ˆç­‰å¾…å®¢æˆ·åé¦ˆã€‚\n\nç³»ç»Ÿæ“ä½œï¼šéœ€åœ¨è®¢å•ç•™è¨€ï¼Œæˆ–å¸®å®¢æˆ·ä»£ç”³è¯·\"ä»…é€€æ¬¾\"ã€‚",
            color: "red"
          },
          result_b2: {
            type: 'result',
            title: "ä¸å¯ä¸Šè´§ + å•ä¸ªå•†å“",
            content: "ç”µè”å®¢æˆ·ï¼šæ²Ÿé€šç›´æ¥é€€æ¬¾ã€‚\n\nè‹¥å®åœ¨æ— æ³•è”ç³»ï¼šåœ¨ç³»ç»Ÿä¸­ç‚¹å‡»æå‰æ½æ”¶ï¼ˆé˜²æ­¢è¶…æ—¶ï¼‰ã€‚\n\nç»§ç»­è”ç»œï¼šä½¿ç”¨\"åŒ…è£¹ä¸¢å¤±\"è¯æœ¯å®‰æŠšå®¢æˆ·ã€‚\n\næœ€ç»ˆå¤„ç†ï¼šæ˜ç¡®æ— æ³•è¡¥å‘ï¼Œå¸®å®¢æˆ·ä»£ç”³è¯·\"ä»…é€€æ¬¾\"ã€‚",
            color: "red"
          },
        };

        const currentStepData = decisionTree[currentStep];
        const isResult = currentStepData && currentStepData.type === 'result';

        const handleOptionSelect = (option) => {
          // Store current state in closure to avoid stale state issues
          const currentState = {
            step: currentStep,
            stepData: currentStepData,
            selectedOption: option.label,
            nextStep: option.next
          };

          // First update history
          setHistory(prev => [
            ...prev,
            {
              stepId: currentState.step,
              step: currentState.stepData,
              selectedOption: currentState.selectedOption
            }
          ]);

          // Then update current step using the captured next step
          setCurrentStep(currentState.nextStep);
        };

        const reset = () => {
          setCurrentStep('start');
          setHistory([]);
        };

        return (
          <div className="max-w-4xl mx-auto space-y-6">
            <Card className="p-6">
              <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
                <AlertTriangle size={20} className="mr-2 text-rose-600" /> è¶…å–å¤„ç†æµç¨‹
              </h2>

              {/* å‰ç½®æç¤º */}
              <div className="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-r-lg mb-6">
                <div className="flex items-center">
                  <AlertTriangle size={18} className="mr-2 text-amber-600" />
                  <span className="text-amber-800 font-bold">æ³¨æ„ï¼š</span>
                </div>
                <p className="text-amber-900 font-medium mt-1">
                  å‡ºç°ç¼ºè´§/è¶…å–æ—¶ï¼Œè¯·ä¼˜å…ˆæ³¨æ„è°ƒæ•´åº“å­˜ã€‚
                </p>
              </div>

              {/* å†³ç­–æ ‘åŒºåŸŸ */}
              <div className="space-y-4">
                <div className="flex items-center justify-between">
                  <h3 className="text-lg font-bold text-slate-800 flex items-center">
                    <FileText size={18} className="mr-2 text-rose-600" /> è¶…å–å¤„ç†å†³ç­–æ ‘
                  </h3>
                  {history.length > 0 && (
                    <button onClick={reset} className="text-sm text-slate-500 hover:text-rose-600 flex items-center transition">
                      <RefreshCw size={14} className="mr-1" /> é‡ç½®
                    </button>
                  )}
                </div>

                {/* Display selection history */}
                {history.map((stepInfo, index) => (
                  <div key={index} className="border-l-4 border-rose-200 pl-4 py-2">
                    <div className="text-sm text-slate-500 mb-1">æ­¥éª¤ {index + 1}</div>
                    <div className="bg-slate-50 rounded-lg p-4">
                      <div className="font-medium text-slate-800 mb-2">{stepInfo.step.question}</div>
                      <div className="text-rose-600 font-medium">
                        <ChevronRight size={14} className="inline mr-1" />
                        é€‰æ‹©ï¼š{stepInfo.selectedOption}
                      </div>
                    </div>
                  </div>
                ))}

                {/* Display current question or result */}
                {currentStepData && (
                  <div className="border-l-4 border-rose-400 pl-4 py-2">
                    <div className="text-sm text-rose-600 mb-1">
                      {history.length === 0 ? 'æ­¥éª¤ 1' : `æ­¥éª¤ ${history.length + 1}`}
                    </div>
                    <div className="bg-rose-50 rounded-lg p-6">
                      {!isResult ? (
                        <>
                          <h3 className="text-lg font-bold text-rose-800 mb-4">
                            {currentStepData.question}
                          </h3>
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                            {currentStepData.options.map((opt, idx) => (
                              <button
                                key={idx}
                                onClick={() => handleOptionSelect(opt)}
                                className="p-3 bg-white border-2 border-rose-100 hover:border-rose-400 hover:bg-rose-50 rounded-lg transition-all duration-200 text-left group shadow-sm"
                              >
                                <span className="font-medium text-slate-700 group-hover:text-rose-700 block">
                                  {opt.label}
                                </span>
                              </button>
                            ))}
                          </div>
                        </>
                      ) : (
                        <div className="text-center space-y-4">
                          <div className={`w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 ${currentStepData.color === 'red' ? 'bg-red-100 text-red-600' :
                            currentStepData.color === 'blue' ? 'bg-blue-100 text-blue-600' :
                              currentStepData.color === 'purple' ? 'bg-purple-100 text-purple-600' :
                                'bg-orange-100 text-orange-600'
                            }`}>
                            <CheckSquare size={32} />
                          </div>

                          <h3 className={`text-2xl font-bold ${currentStepData.color === 'red' ? 'text-red-700' :
                            currentStepData.color === 'blue' ? 'text-blue-700' :
                              currentStepData.color === 'purple' ? 'text-purple-700' :
                                'text-orange-700'
                            }`}>
                            {currentStepData.title}
                          </h3>

                          <div className="text-slate-600 text-lg whitespace-pre-line leading-relaxed bg-white p-4 rounded-lg border border-slate-200 inline-block text-left min-w-[300px]">
                            {currentStepData.content}
                          </div>

                          <div className="pt-6">
                            <button
                              onClick={reset}
                              className="px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition shadow-lg"
                            >
                              é‡æ–°å¼€å§‹
                            </button>
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                )}
              </div>
            </Card>
          </div>
        );
      };

      const WrongShipmentModule = () => {
        // State for the decision tree
        // currentStep: current step ID
        // history: array of previous steps with selections for display
        const [currentStep, setCurrentStep] = useState('start');
        const [history, setHistory] = useState([]);

        // Decision Tree Data (keeping the same structure)
        const decisionTree = {
          start: {
            question: "è¯·é€‰æ‹©å”®åç±»å‹",
            options: [
              { label: "å°‘å‘ / æ¼å‘", next: "short_shipment" },
              { label: "é”™å‘", next: "wrong_item" },
            ]
          },
          short_shipment: {
            question: "ä»“åº“æ˜¯å¦æœ‰è´§ï¼Ÿ",
            options: [
              { label: "æœ‰è´§", next: "result_resend" },
              { label: "æ— è´§", next: "result_refund_only" },
            ]
          },
          wrong_item: {
            question: "æ­£ç¡®åº”å‘çš„å•†å“æ˜¯å¦æœ‰è´§ï¼Ÿ",
            options: [
              { label: "åº”å‘å•†å“ - æœ‰è´§", next: "correct_in_stock" },
              { label: "åº”å‘å•†å“ - æ— è´§", next: "correct_out_stock" },
            ]
          },
          correct_in_stock: {
            question: "å®¢æˆ·éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ",
            options: [
              { label: "è¦é”™å‘å•†å“ + è¦æ­£ç¡®å•†å“", next: "result_keep_both" },
              { label: "è¦é”™å‘å•†å“ + ä¸è¦æ­£ç¡®å•†å“", next: "result_keep_wrong" },
              { label: "ä¸è¦é”™å‘å•†å“ + è¦æ­£ç¡®å•†å“", next: "result_return_resend" },
              { label: "ä¸è¦é”™å‘å•†å“ + ä¸è¦æ­£ç¡®å•†å“", next: "result_return_refund" },
            ]
          },
          correct_out_stock: {
            question: "å®¢æˆ·æ˜¯å¦æ¥å—ä¿ç•™é”™å‘å•†å“ï¼Ÿ",
            options: [
              { label: "éœ€è¦é”™å‘å•†å“", next: "result_keep_wrong_out" },
              { label: "ä¸éœ€è¦é”™å‘å•†å“", next: "result_return_refund_out" },
            ]
          },
          result_resend: { type: 'result', title: "è¡¥å‘", content: "å®‰æ’ä»“åº“è¡¥å‘æ¼å‘å•†å“ã€‚", color: "blue" },
          result_refund_only: { type: 'result', title: "ä»…é€€æ¬¾", content: "ä¸å®¢æˆ·åå•†è¿›è¡Œä»…é€€æ¬¾å¤„ç†ã€‚", color: "red" },
          result_keep_both: { type: 'result', title: "é”™è¯¯å•†å“å‡5å…ƒæˆäº¤ + å®¢æˆ·é‡æ–°ä¸‹å•", content: "1. é”™è¯¯å•†å“æŒ‰å‡5å…ƒä»·æ ¼æˆäº¤ã€‚\n2. å¼•å¯¼å®¢æˆ·å¯¹æ­£ç¡®å•†å“é‡æ–°ä¸‹å•ã€‚", color: "blue" },
          result_keep_wrong: { type: 'result', title: "é”™è¯¯å•†å“å‡5å…ƒæˆäº¤", content: "é”™è¯¯å•†å“æŒ‰å‡5å…ƒä»·æ ¼æˆäº¤ï¼Œæ— éœ€é€€å›ã€‚", color: "blue" },
          result_return_resend: { type: 'result', title: "é”™è¯¯å•†å“é€€å›(è¿è´¹æˆ‘å‡º) + å®¢æˆ·é‡æ–°ä¸‹å•", content: "1. å¼•å¯¼å®¢æˆ·é€€å›é”™è¯¯å•†å“ï¼Œè¿è´¹ç”±æˆ‘æ–¹æ‰¿æ‹…ã€‚\n2. å¼•å¯¼å®¢æˆ·å¯¹æ­£ç¡®å•†å“é‡æ–°ä¸‹å•ã€‚", color: "purple" },
          result_return_refund: { type: 'result', title: "å¸®å®¢æˆ·ç”³è¯·é€€è´§é€€æ¬¾ (è¿è´¹æˆ‘å‡º)", content: "å¼•å¯¼å®¢æˆ·ç”³è¯·é€€è´§é€€æ¬¾ï¼Œè¿è´¹ç”±æˆ‘æ–¹æ‰¿æ‹…ã€‚", color: "orange" },
          result_keep_wrong_out: { type: 'result', title: "é”™è¯¯å•†å“å‡5å…ƒæˆäº¤", content: "é”™è¯¯å•†å“æŒ‰å‡5å…ƒä»·æ ¼æˆäº¤ã€‚", color: "blue" },
          result_return_refund_out: { type: 'result', title: "å¸®å®¢æˆ·ç”³è¯·é€€è´§é€€æ¬¾ (è¿è´¹æˆ‘å‡º)", content: "å¼•å¯¼å®¢æˆ·ç”³è¯·é€€è´§é€€æ¬¾ï¼Œè¿è´¹ç”±æˆ‘æ–¹æ‰¿æ‹…ã€‚", color: "orange" },
        };

        const currentStepData = decisionTree[currentStep];
        const isResult = currentStepData && currentStepData.type === 'result';

        const handleOptionSelect = (option) => {
          // Store current state in closure to avoid stale state issues
          const currentState = {
            step: currentStep,
            stepData: currentStepData,
            selectedOption: option.label,
            nextStep: option.next
          };

          // First update history
          setHistory(prev => [
            ...prev,
            {
              stepId: currentState.step,
              step: currentState.stepData,
              selectedOption: currentState.selectedOption
            }
          ]);

          // Then update current step using the captured next step
          setCurrentStep(currentState.nextStep);
        };

        const reset = () => {
          setCurrentStep('start');
          setHistory([]);
        };

        return (
          <div className="max-w-3xl mx-auto space-y-6">
            <Card className="p-6">
              <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center justify-between">
                <div className="flex items-center">
                  <FileText size={20} className="mr-2 text-indigo-600" /> é”™å‘å¤„ç†å†³ç­–æ ‘
                </div>
                {history.length > 0 && (
                  <button onClick={reset} className="text-sm text-slate-500 hover:text-indigo-600 flex items-center transition">
                    <RefreshCw size={14} className="mr-1" /> é‡ç½®
                  </button>
                )}
              </h2>

              <div className="space-y-4">
                {/* Display selection history */}
                {history.map((stepInfo, index) => (
                  <div key={index} className="border-l-4 border-indigo-200 pl-4 py-2">
                    <div className="text-sm text-slate-500 mb-1">æ­¥éª¤ {index + 1}</div>
                    <div className="bg-slate-50 rounded-lg p-4">
                      <div className="font-medium text-slate-800 mb-2">{stepInfo.step.question}</div>
                      <div className="text-indigo-600 font-medium">
                        <ChevronRight size={14} className="inline mr-1" />
                        é€‰æ‹©ï¼š{stepInfo.selectedOption}
                      </div>
                    </div>
                  </div>
                ))}

                {/* Display current question or result */}
                {currentStepData && (
                  <div className="border-l-4 border-indigo-400 pl-4 py-2">
                    <div className="text-sm text-indigo-600 mb-1">
                      {history.length === 0 ? 'æ­¥éª¤ 1' : `æ­¥éª¤ ${history.length + 1}`}
                    </div>
                    <div className="bg-indigo-50 rounded-lg p-6">
                      {!isResult ? (
                        <>
                          <h3 className="text-lg font-bold text-indigo-800 mb-4">
                            {currentStepData.question}
                          </h3>
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                            {currentStepData.options.map((opt, idx) => (
                              <button
                                key={idx}
                                onClick={() => handleOptionSelect(opt)}
                                className="p-3 bg-white border-2 border-indigo-100 hover:border-indigo-400 hover:bg-indigo-50 rounded-lg transition-all duration-200 text-left group shadow-sm"
                              >
                                <span className="font-medium text-slate-700 group-hover:text-indigo-700 block">
                                  {opt.label}
                                </span>
                              </button>
                            ))}
                          </div>
                        </>
                      ) : (
                        <div className="text-center space-y-4">
                          <div className={`w-16 h-16 mx-auto rounded-full flex items-center justify-center mb-4 ${currentStepData.color === 'red' ? 'bg-red-100 text-red-600' :
                            currentStepData.color === 'blue' ? 'bg-blue-100 text-blue-600' :
                              currentStepData.color === 'purple' ? 'bg-purple-100 text-purple-600' :
                                'bg-orange-100 text-orange-600'
                            }`}>
                            <CheckSquare size={32} />
                          </div>

                          <h3 className={`text-2xl font-bold ${currentStepData.color === 'red' ? 'text-red-700' :
                            currentStepData.color === 'blue' ? 'text-blue-700' :
                              currentStepData.color === 'purple' ? 'text-purple-700' :
                                'text-orange-700'
                            }`}>
                            {currentStepData.title}
                          </h3>

                          <div className="text-slate-600 text-lg whitespace-pre-line leading-relaxed bg-white p-4 rounded-lg border border-slate-200 inline-block text-left min-w-[300px]">
                            {currentStepData.content}
                          </div>

                          <div className="pt-6">
                            <button
                              onClick={reset}
                              className="px-6 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 transition shadow-lg"
                            >
                              é‡æ–°å¼€å§‹
                            </button>
                          </div>
                        </div>
                      )}
                    </div>
                  </div>
                )}
              </div>
            </Card>
          </div>
        );
      };

      // --- Express Compensation Module ---
      // Supabase é…ç½®æ–‡ä»¶
      const SUPABASE_URL = 'https://zxsjvainccqwrmndilhr.supabase.co';
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4c2p2YWluY2Nxd3JtbmRpbGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MjQ1MDksImV4cCI6MjA4MDEwMDUwOX0.f33OG29IJ-QEhtCqwK8Rvd3jhF1rqA64sACTf28jDpk';

      const ExpressCompensationModule = () => {
        const [records, setRecords] = useState([]);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState('');
        const [databaseStatus, setDatabaseStatus] = useState('checking'); // 'checking', 'ready', 'missing'

        // Form states
        const [showForm, setShowForm] = useState(false);
        const [formData, setFormData] = useState({
          trackingNumber: '',
          amount: '',
          type: 'compensation',
          isPaid: false,
          note: ''
        });

        // Search states
        const [searchTerm, setSearchTerm] = useState('');

        // åŒ—äº¬æ—¶é—´å·¥å…·å‡½æ•°
        const getBeijingDate = () => {
          // è·å–åŒ—äº¬æ—¶é—´ (UTC+8)
          const now = new Date();
          const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);
          return beijingTime.toISOString().split('T')[0]; // YYYY-MM-DD
        };

        const getBeijingMonth = () => {
          // è·å–åŒ—äº¬æ—¶é—´çš„å¹´æœˆ (YYYY-MM)
          const now = new Date();
          const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);
          return beijingTime.toISOString().slice(0, 7);
        };

        const [selectedMonth, setSelectedMonth] = useState(getBeijingMonth());

        // Supabase helper functions
        const supabaseRequest = async (method, table, data = null, id = null, query = '') => {
          let url = `${SUPABASE_URL}/rest/v1/${table}`;

          // æ·»åŠ æŸ¥è¯¢æ¡ä»¶
          if (query) {
            url += `?${query}`;
          } else if (id) {
            url += `?id=eq.${id}`;
          }

          const options = {
            method,
            headers: {
              'apikey': SUPABASE_ANON_KEY,
              'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
              'Content-Type': 'application/json',
              'Prefer': method === 'GET' ? '' : 'return=representation'
            }
          };

          if (data && (method === 'POST' || method === 'PATCH')) {
            options.body = JSON.stringify(data);
          }

          const response = await fetch(url, options);

          if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
          }

          return response.json();
        };

        useEffect(() => {
          checkDatabaseConnection();

          // å®šæ—¶è½®è¯¢ï¼Œæ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡
          const interval = setInterval(() => {
            fetchRecords();
          }, 30000);

          return () => clearInterval(interval);
        }, []);

        // æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€
        const checkDatabaseConnection = async () => {
          setDatabaseStatus('checking');
          setError('');
          try {
            // å°è¯•è·å–ä¸€æ¡è®°å½•æ¥æµ‹è¯•è¿æ¥
            const data = await supabaseRequest('GET', 'express_compensation_records?limit=1');
            setDatabaseStatus('ready');
            fetchRecords(); // å¦‚æœè¿æ¥æˆåŠŸï¼Œè·å–æ‰€æœ‰è®°å½•
          } catch (err) {
            if (err.message.includes('PGRST205') || err.message.includes('Could not find')) {
              setDatabaseStatus('missing');
              setError('æ•°æ®åº“è¡¨ä¸å­˜åœ¨ã€‚è¯·å…ˆè¿è¡Œ supabase_init.js è„šæœ¬åˆå§‹åŒ–æ•°æ®åº“ã€‚');
            } else {
              setDatabaseStatus('missing');
              setError(`æ•°æ®åº“è¿æ¥å¤±è´¥: ${err.message}`);
            }
          }
        };

        // ä¸€é”®åˆå§‹åŒ–æ•°æ®åº“
        const quickInitDatabase = async () => {
          setError('');
          try {
            // å°è¯•æ’å…¥ä¸€æ¡æµ‹è¯•è®°å½•æ¥è§¦å‘è¡¨åˆ›å»º
            // è·å–åŒ—äº¬æ—¶é—´ (UTC+8)
            const now = new Date();
            const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);

            const testRecord = {
              tracking_number: 'INIT_TEST_' + Date.now(),
              amount: 0.01,
              record_type: 'compensation',
              is_paid: false,
              record_date: beijingTime.toISOString().split('T')[0],
              note: 'åˆå§‹åŒ–æµ‹è¯•è®°å½•'
            };

            await supabaseRequest('POST', 'express_compensation_records', testRecord);

            // åˆ é™¤æµ‹è¯•è®°å½•
            await supabaseRequest('DELETE', 'express_compensation_records', null, null, 'tracking_number=eq.' + testRecord.tracking_number);

            // é‡æ–°æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
            await checkDatabaseConnection();

          } catch (err) {
            if (err.message.includes('PGRST205') || err.message.includes('Could not find')) {
              setError('è‡ªåŠ¨åˆå§‹åŒ–å¤±è´¥ã€‚è¯·æ‰‹åŠ¨åœ¨Supabase SQL Editorä¸­æ‰§è¡Œ supabase_schema.sql æ–‡ä»¶å†…å®¹ã€‚');
            } else {
              setError(`åˆå§‹åŒ–å¤±è´¥: ${err.message}`);
            }
          }
        };

        // Supabase API functions
        const fetchRecords = async () => {
          setLoading(true);
          setError('');
          try {
            const data = await supabaseRequest('GET', 'express_compensation_records', null, null, 'order=created_at.desc');

            // è½¬æ¢æ•°æ®æ ¼å¼ä»¥åŒ¹é…ç°æœ‰çš„å‰ç«¯é€»è¾‘
            const parsedRecords = data.map(record => ({
              id: record.id,
              trackingNumber: record.tracking_number,
              amount: parseFloat(record.amount),
              type: record.record_type,
              isPaid: record.is_paid,
              date: record.record_date,
              note: record.note
            }));

            setRecords(parsedRecords);
          } catch (err) {
            setError(err.message);
          } finally {
            setLoading(false);
          }
        };

        const createRecord = async () => {
          const amount = formData.type === 'advance' ? -3 : parseFloat(formData.amount);

          // è·å–åŒ—äº¬æ—¶é—´ (UTC+8)
          const now = new Date();
          const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);

          const recordData = {
            tracking_number: formData.trackingNumber,
            amount: amount,
            record_type: formData.type,
            is_paid: formData.isPaid,
            record_date: beijingTime.toISOString().split('T')[0],
            note: formData.note || null
          };

          try {
            const newRecord = await supabaseRequest('POST', 'express_compensation_records', recordData);

            const formattedRecord = {
              id: newRecord[0].id,
              trackingNumber: newRecord[0].tracking_number,
              amount: parseFloat(newRecord[0].amount),
              type: newRecord[0].record_type,
              isPaid: newRecord[0].is_paid,
              date: newRecord[0].record_date,
              note: newRecord[0].note
            };

            setShowForm(false);
            setFormData({ trackingNumber: '', amount: '', type: 'compensation', isPaid: false, note: '' });

            // ä¹è§‚æ›´æ–°ï¼šç›´æ¥æ’å…¥æ–°è®°å½•åˆ°å‰ç«¯åˆ—è¡¨
            setRecords(prev => [formattedRecord, ...prev]);

          } catch (err) {
            setError(err.message);
          }
        };

        const updateRecordStatus = async (recordId, isPaid) => {
          const recordData = {
            is_paid: isPaid
          };

          try {
            await supabaseRequest('PATCH', 'express_compensation_records', recordData, recordId);

            // ä¹è§‚æ›´æ–°ï¼šç›´æ¥æ›´æ–°æœ¬åœ°çŠ¶æ€
            setRecords(prev => prev.map(r => r.id === recordId ? { ...r, isPaid } : r));

          } catch (err) {
            setError(err.message);
          }
        };

        const deleteRecord = async (recordId) => {
          if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) return;

          try {
            await supabaseRequest('DELETE', 'express_compensation_records', null, recordId);

            // ä¹è§‚æ›´æ–°ï¼šç›´æ¥ä»æœ¬åœ°ç§»é™¤
            setRecords(prev => prev.filter(r => r.id !== recordId));

          } catch (err) {
            setError(err.message);
          }
        };

        // Filtering and statistics
        const filteredRecords = records.filter(record => {
          // Search filter
          if (searchTerm && !record.trackingNumber.toLowerCase().includes(searchTerm.toLowerCase())) {
            return false;
          }

          // Month filter
          if (selectedMonth && !record.date.startsWith(selectedMonth)) {
            return false;
          }

          return true;
        });

        // Statistics
        // è·å–åŒ—äº¬æ—¶é—´çš„å¹´æœˆ
        const now = new Date();
        const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);
        const currentMonth = beijingTime.toISOString().slice(0, 7);
        const currentMonthRecords = records.filter(r => r.date.startsWith(currentMonth));
        const unpaidTotal = currentMonthRecords
          .filter(r => !r.isPaid)
          .reduce((sum, r) => sum + r.amount, 0);
        const unpaidCompensation = currentMonthRecords
          .filter(r => !r.isPaid && r.type === 'compensation')
          .reduce((sum, r) => sum + r.amount, 0);
        const unpaidAdvance = Math.abs(currentMonthRecords
          .filter(r => !r.isPaid && r.type === 'advance')
          .reduce((sum, r) => sum + r.amount, 0));

        // Export function
        const exportToCSV = () => {
          const csvData = filteredRecords.map(r =>
            `${r.date},${r.trackingNumber},${r.type === 'compensation' ? 'å¿«é€’èµ”æˆ‘' : 'æå‰æ½æ”¶'},${r.amount},${r.isPaid ? 'å·²æ”¯ä»˜' : 'æœªæ”¯ä»˜'},${r.note || ''}`
          ).join('\n');

          const csv = '\uFEFFæ—¥æœŸ,å¿«é€’å•å·,ç±»å‹,é‡‘é¢,çŠ¶æ€,å¤‡æ³¨\n' + csvData;
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);

          // è·å–åŒ—äº¬æ—¶é—´çš„æ—¥æœŸç”¨äºæ–‡ä»¶å
          const now = new Date();
          const beijingTime = new Date(now.getTime() + 8 * 60 * 60 * 1000);
          link.download = `å¿«é€’èµ”å¿è®°å½•_${beijingTime.toISOString().slice(0, 10)}.csv`;
          link.click();
        };

        // Configuration UI - æ˜¾ç¤ºæ•°æ®åº“çŠ¶æ€
        if (databaseStatus === 'checking') {
          return (
            <div className="max-w-2xl mx-auto space-y-6">
              <Card className="p-6">
                <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
                  <Truck size={20} className="mr-2 text-teal-600" /> å¿«é€’èµ”å¿è´¦æœ¬
                </h2>
                <div className="text-center py-8">
                  <div className="animate-spin w-6 h-6 border-2 border-teal-600 border-t-transparent rounded-full mx-auto mb-4"></div>
                  <p className="text-slate-600">æ­£åœ¨æ£€æŸ¥æ•°æ®åº“è¿æ¥...</p>
                </div>
              </Card>
            </div>
          );
        }

        if (databaseStatus === 'missing') {
          return (
            <div className="max-w-2xl mx-auto space-y-6">
              <Card className="p-6">
                <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
                  <Truck size={20} className="mr-2 text-teal-600" /> å¿«é€’èµ”å¿è´¦æœ¬ - æ•°æ®åº“åˆå§‹åŒ–
                </h2>

                <div className="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6">
                  <div className="flex items-center">
                    <div className="mr-3">
                      <svg className="w-5 h-5 text-amber-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                      </svg>
                    </div>
                    <div>
                      <p className="text-sm text-amber-800">
                        æ•°æ®åº“è¡¨ä¸å­˜åœ¨ï¼Œéœ€è¦åˆå§‹åŒ–ã€‚
                      </p>
                    </div>
                  </div>
                </div>

                <div className="space-y-4">
                  {/* ä¸€é”®åˆå§‹åŒ–æŒ‰é’® */}
                  <div className="text-center">
                    <button
                      onClick={quickInitDatabase}
                      className="w-full py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium text-lg mb-4 focus:outline-none"
                    >
                      ğŸš€ ä¸€é”®åˆå§‹åŒ–æ•°æ®åº“
                    </button>
                  </div>

                  <div className="bg-slate-50 p-4 rounded-lg">
                    <h4 className="text-sm font-medium text-slate-700 mb-2">æ‰‹åŠ¨åˆå§‹åŒ–æ–¹æ³•ï¼š</h4>
                    <ol className="text-sm text-slate-600 space-y-2 list-decimal list-inside">
                      <li>å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°æµè§ˆå™¨æ§åˆ¶å°ï¼š</li>
                    </ol>
                  </div>

                  <div className="bg-slate-900 text-slate-100 p-4 rounded-lg overflow-x-auto">
                    <code className="text-xs">
                      {`fetch('quick-init.js').then(r => r.text()).then(code => eval(code));`}
                    </code>
                  </div>

                  <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                    <p className="text-sm text-blue-800">
                      æˆ–è€…åœ¨ Supabase Dashboard â†’ SQL Editor ä¸­æ‰‹åŠ¨æ‰§è¡Œ supabase_schema.sql æ–‡ä»¶å†…å®¹ã€‚
                    </p>
                  </div>

                  <button
                    onClick={checkDatabaseConnection}
                    className="w-full py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-medium focus:outline-none"
                  >
                    é‡æ–°æ£€æŸ¥æ•°æ®åº“
                  </button>
                </div>
              </Card>
            </div>
          );
        }

        // Main UI
        return (
          <div className="max-w-6xl mx-auto space-y-6">
            {/* Header with export button */}
            <div className="flex justify-between items-center">
              <h2 className="text-2xl font-bold text-slate-800 flex items-center">
                <Truck size={24} className="mr-2 text-teal-600" /> å¿«é€’èµ”å¿è´¦æœ¬
              </h2>
              <div className="flex gap-3">
                <button
                  onClick={exportToCSV}
                  disabled={filteredRecords.length === 0}
                  className="text-sm text-slate-500 hover:text-blue-600 disabled:text-slate-300 transition"
                >
                  å¯¼å‡ºCSV
                </button>
                <div className="text-xs text-slate-400 px-2 py-1 bg-slate-100 rounded">
                  Supabaseæ•°æ®åº“
                </div>
              </div>
            </div>

            {/* Statistics Cards */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <Card className="p-4 border-l-4 border-l-red-500">
                <div className="text-sm text-slate-500 mb-1">æœ¬æœˆæœªæ”¯ä»˜å‡€é¢</div>
                <div className="text-2xl font-bold text-red-600">
                  {unpaidTotal >= 0 ? '+' : ''}{unpaidTotal.toFixed(2)} å…ƒ
                </div>
              </Card>

              <Card className="p-4 border-l-4 border-l-emerald-500">
                <div className="text-sm text-slate-500 mb-1">å¿«é€’èµ”æˆ‘ï¼ˆæœªä»˜ï¼‰</div>
                <div className="text-2xl font-bold text-emerald-600">
                  +{unpaidCompensation.toFixed(2)} å…ƒ
                </div>
              </Card>

              <Card className="p-4 border-l-4 border-l-amber-500">
                <div className="text-sm text-slate-500 mb-1">æˆ‘èµ”å¿«é€’ï¼ˆæœªä»˜ï¼‰</div>
                <div className="text-2xl font-bold text-amber-600">
                  -{unpaidAdvance.toFixed(2)} å…ƒ
                </div>
              </Card>
            </div>

            {error && (
              <div className="bg-red-50 border-l-4 border-red-500 p-4">
                <p className="text-sm text-red-800">{error}</p>
              </div>
            )}

            {/* Action Buttons */}
            <button
              onClick={() => setShowForm(!showForm)}
              className="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-medium flex items-center focus:outline-none"
            >
              <span className="mr-2">+</span> æ·»åŠ è®°å½•
            </button>

            {/* Add Record Form */}
            {showForm && (
              <Card className="p-6">
                <h3 className="font-bold text-slate-800 mb-4">æ–°å¢è®°å½•</h3>

                {/* Type Selection - Large Buttons */}
                <div className="grid grid-cols-2 gap-3 mb-6">
                  <button
                    type="button"
                    onClick={() => setFormData({ ...formData, type: 'compensation' })}
                    className={`py-3 px-6 rounded-lg font-medium transition-colors ${formData.type === 'compensation'
                      ? 'bg-blue-600 text-white shadow-md focus:outline-none'
                      : 'bg-white text-slate-600 border-2 border-slate-200 hover:border-blue-300 focus:outline-none'
                      }`}
                  >
                    æ”¶åˆ°èµ”å¿ï¼ˆæ”¶å…¥ï¼‰
                  </button>
                  <button
                    type="button"
                    onClick={() => setFormData({ ...formData, type: 'advance' })}
                    className={`py-3 px-6 rounded-lg font-medium transition-colors ${formData.type === 'advance'
                      ? 'bg-blue-600 text-white shadow-md focus:outline-none'
                      : 'bg-white text-slate-600 border-2 border-slate-200 hover:border-blue-300 focus:outline-none'
                      }`}
                  >
                    æ”¯ä»˜æå‰æ½æ”¶è´¹ç”¨ï¼ˆæ”¯å‡ºï¼‰
                  </button>
                </div>

                <div className="space-y-4">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-medium text-slate-700 mb-2">å¿«é€’å•å·</label>
                      <input
                        type="text"
                        value={formData.trackingNumber}
                        onChange={(e) => setFormData({ ...formData, trackingNumber: e.target.value })}
                        placeholder="è¾“å…¥å•å·..."
                        className="w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-teal-500"
                      />
                    </div>

                    {formData.type === 'compensation' && (
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">é‡‘é¢ï¼ˆå…ƒï¼‰</label>
                        <input
                          type="number"
                          step="0.01"
                          value={formData.amount}
                          onChange={(e) => setFormData({ ...formData, amount: e.target.value })}
                          placeholder="0.00"
                          className="w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-teal-500"
                        />
                      </div>
                    )}

                    {formData.type === 'advance' && (
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">é‡‘é¢ï¼ˆå…ƒï¼‰</label>
                        <input
                          type="text"
                          value="3"
                          disabled
                          className="w-full border border-slate-300 rounded-lg p-2 bg-slate-100 text-slate-600"
                        />
                      </div>
                    )}
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-slate-700 mb-2">å¤‡æ³¨</label>
                    <input
                      type="text"
                      value={formData.note}
                      onChange={(e) => setFormData({ ...formData, note: e.target.value })}
                      placeholder="å¯é€‰å¤‡æ³¨ä¿¡æ¯..."
                      className="w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-teal-500"
                    />
                  </div>
                </div>



                <div className="flex gap-3 mt-6">
                  <button
                    onClick={createRecord}
                    disabled={!formData.trackingNumber || (formData.type === 'compensation' && !formData.amount)}
                    className="flex-1 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-slate-300 transition font-medium focus:outline-none"
                  >
                    + è®°ä¸€ç¬”
                  </button>
                  <button
                    onClick={() => setShowForm(false)}
                    className="px-6 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition font-medium focus:outline-none"
                  >
                    å–æ¶ˆ
                  </button>
                </div>
              </Card>
            )}

            {/* Search and Filter */}
            <Card className="p-4">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input
                  type="text"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  placeholder="æœç´¢å¿«é€’å•å·..."
                  className="w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-teal-500"
                />
                <input
                  type="month"
                  value={selectedMonth}
                  onChange={(e) => setSelectedMonth(e.target.value)}
                  className="w-full border border-slate-300 rounded-lg p-2 focus:ring-2 focus:ring-teal-500"
                />
              </div>
            </Card>

            {/* Records List */}
            <Card className="p-6">
              <h3 className="font-bold text-slate-800 mb-4">
                è®°å½•åˆ—è¡¨ ({filteredRecords.length})
              </h3>

              {loading ? (
                <div className="text-center py-8 text-slate-500">åŠ è½½ä¸­...</div>
              ) : filteredRecords.length === 0 ? (
                <div className="text-center py-8 text-slate-500">æš‚æ— è®°å½•</div>
              ) : (
                <div className="space-y-3">
                  {filteredRecords.map((record) => (
                    <div
                      key={record.id}
                      className={`border rounded-lg p-4 ${record.isPaid ? 'bg-slate-50 border-slate-200' : 'bg-white border-slate-300'}`}
                    >
                      <div className="flex justify-between items-start">
                        <div className="flex-1">
                          <div className="flex items-center gap-2 mb-2">
                            <span className={`px-2 py-1 rounded text-xs font-medium ${record.type === 'compensation'
                              ? 'bg-emerald-100 text-emerald-700'
                              : 'bg-amber-100 text-amber-700'
                              }`}>
                              {record.type === 'compensation' ? 'å¿«é€’èµ”æˆ‘' : 'æå‰æ½æ”¶'}
                            </span>
                            <span className={`px-2 py-1 rounded text-xs font-medium ${record.isPaid
                              ? 'bg-blue-100 text-blue-700'
                              : 'bg-red-100 text-red-700'
                              }`}>
                              {record.isPaid ? 'å·²æ”¯ä»˜' : 'æœªæ”¯ä»˜'}
                            </span>
                            <span className="text-xs text-slate-500">{record.date}</span>
                          </div>
                          <div className="font-mono text-slate-800 font-medium">
                            {record.trackingNumber}
                          </div>
                          {record.note && (
                            <div className="text-sm text-slate-500 mt-1">
                              å¤‡æ³¨ï¼š{record.note}
                            </div>
                          )}
                        </div>

                        <div className="flex items-center gap-3">
                          <div className={`text-xl font-bold ${record.amount >= 0 ? 'text-emerald-600' : 'text-amber-600'
                            }`}>
                            {record.amount >= 0 ? '+' : ''}{record.amount.toFixed(2)}å…ƒ
                          </div>

                          <div className="flex gap-3 items-center">
                            {/* Toggle Switch for Payment Status with Labels */}
                            <div className="flex items-center gap-2">
                              <span className={`text-xs font-medium ${!record.isPaid ? 'text-slate-700' : 'text-slate-400'}`}>
                                æœªä»˜
                              </span>
                              <button
                                type="button"
                                onClick={() => updateRecordStatus(record.id, !record.isPaid)}
                                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${record.isPaid ? 'bg-emerald-600' : 'bg-slate-300'
                                  }`}
                              >
                                <span
                                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${record.isPaid ? 'translate-x-6' : 'translate-x-1'
                                    }`}
                                />
                              </button>
                              <span className={`text-xs font-medium ${record.isPaid ? 'text-emerald-600' : 'text-slate-400'}`}>
                                å·²ä»˜
                              </span>
                            </div>
                            <button
                              onClick={() => deleteRecord(record.id)}
                              className="px-3 py-1 bg-red-100 text-red-700 rounded text-sm font-medium hover:bg-red-200 transition focus:outline-none"
                            >
                              åˆ é™¤
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </Card>
          </div>
        );
      };

      const ContentRenderer = () => {
        switch (activeTab) {
          case 'dashboard': return <Dashboard />;
          case 'calculator': return <DecisionCalculator />;
          case 'expressCompensation': return <ExpressCompensationModule />;
          case 'refunds': return <RefundsModule />;
          case 'returns': return <ReturnsModule />;
          case 'replace': return <ReplaceModule />;
          case 'blacklist': return <CustomerBlacklistModule />;
          case 'manual': return <NotesModule />;
          case 'overdue': return <OverdueModule />;
          case 'oversold': return <OversoldModule />;
          case 'wrongShipment': return <WrongShipmentModule />;
          default: return <Dashboard />;
        }
      }

      return (
        <div className="min-h-screen bg-slate-100 font-sans text-slate-800">
          {/* Header */}
          <header className="bg-white shadow-sm border-b sticky top-0 z-50">
            <div className="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
              <div className="flex items-center space-x-3">
                {/* Mobile Menu Button */}
                <button
                  onClick={() => setIsMobileMenuOpen(true)}
                  className="md:hidden p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-lg"
                >
                  <Menu size={24} />
                </button>
                <div className="bg-blue-600 text-white p-2 rounded-lg">
                  {/* æ–°Logoè®¾è®¡ (999.svg) */}
                  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 30 30">
                    <path fill="#2662ea" d="M 20.03125 28.535156 L 9.957031 28.535156 C 4.988281 28.535156 0.96875 24.503906 0.96875 19.546875 L 0.96875 9.472656 C 0.96875 4.503906 5 0.488281 9.957031 0.488281 L 20.03125 0.488281 C 25 0.488281 29.019531 4.515625 29.019531 9.472656 L 29.019531 19.546875 C 29.019531 24.515625 25 28.535156 20.03125 28.535156 Z" />
                    <path fill="#ffffff" d="M 21.164062 29.03125 L 8.835938 29.03125 C 4.230469 29.03125 0.484375 25.285156 0.484375 20.679688 L 0.484375 8.351562 C 0.484375 3.746094 4.230469 0 8.835938 0 L 21.164062 0 C 25.769531 0 29.515625 3.746094 29.515625 8.351562 L 29.515625 20.679688 C 29.515625 25.285156 25.769531 29.03125 21.164062 29.03125 Z M 8.835938 0.984375 C 4.773438 0.984375 1.46875 4.289062 1.46875 8.351562 L 1.46875 20.679688 C 1.46875 24.742188 4.773438 28.046875 8.835938 28.046875 L 21.164062 28.046875 C 25.226562 28.046875 28.53125 24.742188 28.53125 20.679688 L 28.53125 8.351562 C 28.53125 4.289062 25.226562 0.984375 21.164062 0.984375 Z" />
                    <path fill="#ffde59" d="M 24.125 11.316406 L 24.125 11.199219 C 24.125 6.625 20.402344 2.902344 15.828125 2.902344 L 14.171875 2.902344 C 9.597656 2.902344 5.875 6.625 5.875 11.199219 L 5.875 11.316406 C 4.449219 11.6875 3.386719 12.976562 3.386719 14.515625 L 3.386719 16.175781 C 3.386719 18.003906 4.875 19.492188 6.703125 19.492188 L 8.363281 19.492188 C 8.820312 19.492188 9.195312 19.121094 9.195312 18.664062 L 9.195312 12.027344 C 9.195312 11.570312 8.820312 11.199219 8.363281 11.199219 L 7.535156 11.199219 C 7.535156 7.539062 10.511719 4.5625 14.171875 4.5625 L 15.828125 4.5625 C 19.488281 4.5625 22.464844 7.539062 22.464844 11.199219 L 21.636719 11.199219 C 21.179688 11.199219 20.804688 11.570312 20.804688 12.027344 L 20.804688 18.664062 C 20.804688 19.121094 21.179688 19.492188 21.636719 19.492188 L 22.425781 19.492188 C 22.179688 22.085938 20.777344 22.652344 19.8125 22.777344 C 19.460938 21.832031 18.554688 21.152344 17.488281 21.152344 C 16.117188 21.152344 15 22.269531 15 23.640625 C 15 25.011719 16.117188 26.128906 17.488281 26.128906 C 18.582031 26.128906 19.503906 25.414062 19.835938 24.433594 C 22.410156 24.171875 23.902344 22.410156 24.101562 19.382812 C 25.539062 19.019531 26.613281 17.726562 26.613281 16.175781 L 26.613281 14.515625 C 26.613281 12.976562 25.550781 11.6875 24.125 11.316406 Z M 7.535156 17.835938 L 6.703125 17.835938 C 5.789062 17.835938 5.046875 17.089844 5.046875 16.175781 L 5.046875 14.515625 C 5.046875 13.601562 5.789062 12.855469 6.703125 12.855469 L 7.535156 12.855469 Z M 17.488281 24.46875 C 17.03125 24.46875 16.660156 24.097656 16.660156 23.640625 C 16.660156 23.183594 17.03125 22.8125 17.488281 22.8125 C 17.945312 22.8125 18.316406 23.183594 18.316406 23.640625 C 18.316406 24.097656 17.945312 24.46875 17.488281 24.46875 Z M 24.953125 16.175781 C 24.953125 17.089844 24.210938 17.835938 23.296875 17.835938 L 22.464844 17.835938 L 22.464844 12.855469 L 23.296875 12.855469 C 24.210938 12.855469 24.953125 13.601562 24.953125 14.515625 Z" />
                  </svg>
                </div>
                <h1 className="text-lg font-bold">å®¢æœå”®åå·¥ä½œå°</h1>
              </div>
              <div className="hidden md:block text-xs text-slate-500 bg-slate-100 px-3 py-1 rounded-full">
                ç‰ˆæœ¬: v1.8 (ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–ï¼Œæ–°å¢ä¾§è¾¹æ å¯¼èˆªï¼Œä¼˜åŒ–SOPå¸ƒå±€)
              </div>
            </div>
          </header>

          {/* Main Content */}
          {/* å“åº”å¼å¸ƒå±€ï¼šåœ¨ md æ–­ç‚¹ä»¥ä¸‹ï¼Œä¾§è¾¹æ å¯¼èˆªä¼šå˜æˆæŠ½å±‰å¼ */}
          <main className="max-w-5xl mx-auto px-4 py-6 flex flex-col md:flex-row gap-6 relative">

            {/* Mobile Sidebar Overlay */}
            {isMobileMenuOpen && (
              <div
                className="fixed inset-0 top-16 bg-black/50 z-30 md:hidden"
                onClick={() => setIsMobileMenuOpen(false)}
              />
            )}

            {/* Sidebar Navigation */}
            <nav className={`
              fixed md:static top-16 bottom-0 md:inset-y-0 left-0 z-40 w-64 bg-white md:bg-transparent shadow-xl md:shadow-none transform transition-transform duration-300 ease-in-out
              ${isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}
              flex-shrink-0 space-y-2 p-4 md:p-2 h-[calc(100vh-4rem)] md:h-auto overflow-y-auto md:overflow-visible
            `}>
              <div className="flex justify-between items-center md:hidden mb-6">
                <h2 className="font-bold text-lg text-slate-800">èœå•å¯¼èˆª</h2>
                <button
                  onClick={() => setIsMobileMenuOpen(false)}
                  className="p-2 -mr-2 text-slate-500 hover:bg-slate-100 rounded-full"
                >
                  <X size={24} />
                </button>
              </div>

              <button
                onClick={() => { setActiveTab('dashboard'); setIsMobileMenuOpen(false); }}
                className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'dashboard' ? 'bg-blue-600 text-white shadow-md' : 'bg-white text-slate-600 hover:bg-slate-50'}`}
              >
                <CheckSquare size={18} className="mr-3" /> å·¥ä½œæ€»è§ˆ
              </button>

              <div className="pt-4 pb-2 text-xs font-bold text-slate-400 uppercase tracking-wider px-4">å·¥å…·</div>
              <button
                onClick={() => { setActiveTab('calculator'); setIsMobileMenuOpen(false); }}
                className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'calculator' ? 'bg-white text-blue-600 border-l-4 border-blue-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
              >
                <Calculator size={18} className="mr-3" /> å†³ç­–è®¡ç®—å™¨
              </button>
              <button
                onClick={() => { setActiveTab('expressCompensation'); setIsMobileMenuOpen(false); }}
                className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'expressCompensation' ? 'bg-white text-teal-600 border-l-4 border-teal-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
              >
                <Truck size={18} className="mr-3" /> å¿«é€’èµ”å¿è®°å½•
              </button>

              {/* SOP æµç¨‹æŒ‡å¼• - å¯æŠ˜å  */}
              <div
                className="flex items-center justify-between px-4 pt-4 pb-2 cursor-pointer hover:bg-slate-50 rounded transition select-none"
                onClick={() => setIsSopExpanded(!isSopExpanded)}
              >
                <div className="text-xs font-bold text-slate-400 uppercase tracking-wider">SOP æµç¨‹æŒ‡å¼•</div>
                {isSopExpanded ? <ChevronDown size={14} className="text-slate-400" /> : <ChevronRight size={14} className="text-slate-400" />}
              </div>

              {isSopExpanded && (
                <div className="space-y-1">
                  <button
                    onClick={() => { setActiveTab('refunds'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'refunds' ? 'bg-white text-blue-600 border-l-4 border-blue-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <Search size={18} className="mr-3" /> ä»…é€€æ¬¾ / æ‹¦æˆª
                  </button>
                  <button
                    onClick={() => { setActiveTab('returns'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'returns' ? 'bg-white text-emerald-600 border-l-4 border-emerald-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <Package size={18} className="mr-3" /> é€€è´§æ‰«ç 
                  </button>
                  <button
                    onClick={() => { setActiveTab('replace'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'replace' ? 'bg-white text-purple-600 border-l-4 border-purple-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <RefreshCw size={18} className="mr-3" /> è¡¥å‘ / æ¢è´§
                  </button>
                  <button
                    onClick={() => { setActiveTab('overdue'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'overdue' ? 'bg-white text-amber-600 border-l-4 border-amber-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <Clock size={18} className="mr-3" /> è¶…æœŸå”®å
                  </button>
                  <button
                    onClick={() => { setActiveTab('oversold'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'oversold' ? 'bg-white text-rose-600 border-l-4 border-rose-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <AlertTriangle size={18} className="mr-3" /> è¶…å–å¤„ç†
                  </button>
                  <button
                    onClick={() => { setActiveTab('wrongShipment'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'wrongShipment' ? 'bg-white text-indigo-600 border-l-4 border-indigo-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <FileText size={18} className="mr-3" /> é”™å‘å¤„ç†
                  </button>
                </div>
              )}

              {/* æ—¥å¸¸æµç¨‹æŒ‡å¼• (åŸå…¶å®ƒ) - å¯æŠ˜å  */}
              <div
                className="flex items-center justify-between px-4 pt-4 pb-2 cursor-pointer hover:bg-slate-50 rounded transition select-none"
                onClick={() => setIsDailyExpanded(!isDailyExpanded)}
              >
                <div className="text-xs font-bold text-slate-400 uppercase tracking-wider">æ—¥å¸¸æµç¨‹æŒ‡å¼•</div>
                {isDailyExpanded ? <ChevronDown size={14} className="text-slate-400" /> : <ChevronRight size={14} className="text-slate-400" />}
              </div>

              {isDailyExpanded && (
                <div className="space-y-1">
                  <button
                    onClick={() => { setActiveTab('blacklist'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'blacklist' ? 'bg-white text-red-600 border-l-4 border-red-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <UserX size={18} className="mr-3" /> é£é™©æ§åˆ¶
                  </button>
                  <button
                    onClick={() => { setActiveTab('manual'); setIsMobileMenuOpen(false); }}
                    className={`w-full text-left px-4 py-3 rounded-lg font-medium flex items-center transition ${activeTab === 'manual' ? 'bg-white text-orange-600 border-l-4 border-orange-600 shadow-sm' : 'text-slate-600 hover:bg-white hover:shadow-sm'}`}
                  >
                    <AlertCircle size={18} className="mr-3" /> æ“ä½œæŠ€å·§
                  </button>
                </div>
              )}
            </nav>

            {/* Content Area */}
            <div className="flex-1">
              <ContentRenderer />
            </div>

          </main>
        </div>
      );
    }

    root.render(<App />);
  </script>
</body>

</html>